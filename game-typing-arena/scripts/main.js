"use strict";function funText(t,a){var n=t.innerText;t.innerHTML="",n.split("").map(function(n,e){var i=document.createElement("span");n=" "===n?"&nbsp;":n,i.innerHTML=n,i.className=a,i.style.display="inline-block",i.style.animationDelay=100*e+"ms",t.appendChild(i)})}
"use strict";function Hero(s){var n=this,i=[],o=s.querySelector(".hero__skillet");this.state={action:!1,nextAction:!1,pose:null,direction:1,directionY:1,positionX:0,positionY:0,speedX:0,boostX:0,speedY:0,boostY:0},this.setPose=function(t){return n.state.pose&&requestAnimationFrame(function(){s.classList.remove("hero_"+n.state.pose)}),t&&(n.state.pose=t,requestAnimationFrame(function(){s.classList.add("hero_"+t)})),n},this.unsetPose=function(t){return n.state.pose=null,requestAnimationFrame(function(){s.classList.remove("hero_"+t)}),n},this.setSkin=function(t){return s.classList.remove("hero_"+n.state.skin),(n.state.skin=t)&&s.classList.add("hero_"+t),n},this.runAction=function(t,e){if(1!==e&&-1!==e||e!==n.state.direction&&(n.state.direction=e,n.state.speedX=0),-1!==i.indexOf(t))return n.state.nextAction=[t,e],n;var s=!!a[t]&&a[t];if(!s)return n;i.push(t);var o=0;return s.map(function(t){setTimeout(t.action,o),o+=t.duration?t.duration:0}),setTimeout(function(){i.splice(i.indexOf(t,1)),n.state.nextAction&&(n.runAction(n.state.nextAction[0],n.state.nextAction[1]),n.state.nextAction=!1)},o),n};var a={jump:[{name:"jump-start",duration:1500,action:function(){0<!n.state.positionY&&(n.state.speedY=60,n.state.boostX=40)}}],down:[{name:"down-start",duration:500,action:function(){n.setPose("down")}},{name:"down-end",action:function(){n.unsetPose("down")}}],move:[{name:"Step1",duration:300,action:function(){n.state.boostX=35,n.state.pose||n.setPose("step-1")}},{name:"Step2",duration:300,action:function(){n.unsetPose("step-1"),n.state.pose||n.setPose("step-2")}},{name:"stop",action:function(){n.unsetPose("step-2")}}],damage:[{name:"takeDamageStart",duration:300,action:function(){n.setPose("damage")}},{name:"takeDamageEnd",action:function(){n.unsetPose("damage")}}],hit:[{name:"hit1",duration:300,action:function(){n.setPose("hit-1")}},{name:"hit2",duration:300,action:function(){n.unsetPose("hit-1"),n.setPose("hit-2");var t=!1;for(var e in gameObjects)if(gameObjects[e]!==n){var s=gameObjects[e].state.positionX-n.state.positionX,o=gameObjects[e].state.positionY-n.state.positionY;Math.abs(s)<=200&&Math.abs(o)<100&&(t||(0<s?(n.state.direction=1,gameObjects[e].state.direction=-1):(n.state.direction=-1,gameObjects[e].state.direction=1),t=!0),n.state.direction+gameObjects[e].state.direction===0&&0<s*n.state.direction&&(gameObjects[e].state.speedX=-50,gameObjects[e].runAction("damage")))}}},{name:"hitEnd",action:function(){n.unsetPose("hit-2")}}]};return animationsLoop.push(function(){var t=physics(n.state.positionX,n.state.boostX,n.state.speedX,n.state.direction,arena.xMax,arena.xMin);n.state.positionX=t.position,n.state.boostX=t.boost,n.state.speedX=t.speed,n.state.direction=t.direction;var e=physics(n.state.positionY,n.state.boostY,n.state.speedY,n.state.directionY,arena.yMax,arena.yMin);n.state.positionY=e.position,n.state.boostY=e.boost,n.state.speedY=e.speed,n.state.directionY=e.direction,0===n.state.speedY&&0<n.state.positionY&&(n.state.directionY=-1),-1===n.state.directionY&&(n.state.speedY+=3),n.state.positionY<=0&&n.state.speedY<80&&(n.state.boostY=0,n.state.speedY=0,n.state.positionY=0,n.state.directionY=1,"jump"===n.state.pose&&(n.setPose("landed"),setTimeout(function(){n.unsetPose("landed"),n.unsetPose("jump")},300))),0<n.state.speedY?n.state.pose||n.setPose("jump"):n.unsetPose("jump"),s.style.transform="translate(".concat(n.state.positionX,"%, ").concat(-n.state.positionY,"%)"),o.style.transform="scaleX(".concat(n.state.direction,")")}),this}
"use strict";function physics(s,t,a,i,b,h){return a=Math.abs(a)<1?0:a,0<(t=t<=0?0:t)?(t-=1+Math.abs(t)/100,a+=1+Math.abs(t)/100):0!==a&&0<a?a-=1+Math.abs(a)/100:0!==a&&a<0&&(a+=1+Math.abs(a)/100),b<(s+=a/10*i)?i=0<a?-1:1:s<h&&(i=0<a?1:-1),{position:s,boost:t,speed:a,direction:i}}
"use strict";function Ui(){var o=this,n=0,l=-1;this.makePhrase=function(e){for(var l="",i="abcdefghijklmnopqrstuvwxyz",m=i.length,t=function(t){var s=i.charAt(Math.floor(Math.random()*m)),n=!1;0===t&&o.elements.map(function(e){e.symbols[0]===s&&(t=-1,n=!0)}),n||(l+=s),a=t},a=0;a<e;a++)t(a);return l},this.elements=[];for(var e=document.querySelectorAll(".ui__element"),t=0;t<e.length;t++){this.elements[t]=new UiElement(e[t]);var s=4;config.lengthPhrasesForActions[this.elements[t].action]&&(s=config.lengthPhrasesForActions[this.elements[t].action]),this.elements[t].setText(this.makePhrase(s))}this.found=function(s){var e=!1;return l<0?(o.elements.map(function(e,t){e.symbols[n]===s?(e.elemSymbols[n].classList.add("fadeOutDown"),e.elemText.style.transform="scale(1.5)",l=t):e.elem.style.display="none"}),n++):o.elements[l].symbols[n]===s?(o.elements[l].elemSymbols[n].classList.remove("fadeIn"),o.elements[l].elemSymbols[n].classList.add("fadeOutDown"),n++):(o.elements[l].setText(o.makePhrase(o.elements[l].text.length)),l=-1,n=0),0<=l&&o.elements[l].symbols.length===n?(o.elements[l].setText(o.makePhrase(o.elements[l].text.length)),gameObjects.player.runAction(o.elements[l].action,+o.elements[l].direction),l=-1,e=!(n=0)):0<=l&&o.elements[l].elemSymbols[n].classList.add("ui__symbol_selected"),!(l<0)||(o.elements.map(function(e){e.elem.style.display="",e.elemText.style.transform=""}),l=-1,n=0,!!e)}}function UiElement(e){var l=this;return this.elem=e,this.text="",this.action=e.dataset.action,this.direction=e.dataset.direction,this.icon=e.dataset.icon,this.symbols=[],this.elemSymbols=[],this.elemText=document.createElement("div"),this.elemText.classList.add("ui__text"),this.elem.appendChild(this.elemText),this.elemUiIcon=document.createElement("div"),this.elemUiIcon.classList.add("ui__icon"),this.elem.appendChild(this.elemUiIcon),this.elemIcon=document.createElement("div"),this.elemIcon.classList.add("icon"),this.elemIcon.classList.add("icon_"+this.icon),this.elemUiIcon.appendChild(this.elemIcon),this.setText=function(e){l.text=e,l.elemText.innerHTML="";var n="fadeIn";l.text.split("").map(function(e,t){var s=document.createElement("span");e=" "===e?"&nbsp;":e,l.symbols[t]=e,s.innerHTML=e,s.className="ui__symbol "+n,s.style.display="inline-block",s.style.animationDelay=100*t+"ms",l.elemSymbols[t]=s,l.elemText.appendChild(s),setTimeout(function(){s.classList.remove(n)},100*(t+1))})},this}
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var activeDrawsList=[],showFrameRate=!1;function animate(t){var i="number"==typeof(t="object"==_typeof(t)?t:{}).duration?t.duration:1e3,e="number"==typeof t.delay?t.delay:0,n="number"==typeof t.from?t.from:1,o="number"==typeof t.to?t.to:100,f="function"==typeof t.timing?t.timing:linear,c="function"==typeof t.draw?t.draw:function(t){console.log(100*t)},s="function"==typeof t.before?t.before:function(){},m="function"==typeof t.after?t.after:function(){},p=n/100,y=o/100;setTimeout(function(){for(var a=performance.now(),u=a,t=activeDrawsList.length-1;0<=t;t--)if(activeDrawsList[t]===c)return!1;activeDrawsList.push(c);requestAnimationFrame(function t(e){s&&(s(),s=!1);var n=(e-a)/i;if(1<n&&(n=1),p<y)var o=(n+=p)<y;else o=y<(n=-(n-p));var r=f(n);c(r),o?(requestAnimationFrame(t),showFrameRate&&(console.log(frameRate(u,e),Math.round(100*n)),u=e)):(activeDrawsList.splice(activeDrawsList.indexOf(c),1),m&&m())})},e)}function frameRate(t,e){return Math.round(1e3/(e-t))}function zone(t,e,n,o){if(n*=100,o*=100,(e*=100)<=(t*=100)&&t<=n){var r=(t-e)/(n-e);return o&&o(r),r}return t<=e?0:n<=t?1:void 0}function makeEaseOut(e){return function(t){return 1-e(1-t)}}function makeEaseInOut(e){return function(t){return t<.5?e(2*t)/2:(2-e(2*(1-t)))/2}}function linear(t){return t}function quad(t){return Math.pow(t,2)}var quadEaseOut=makeEaseOut(quad);function circ(t){return 1-Math.sin(Math.acos(t))}var circEaseOut=makeEaseOut(circ);function back(t,e){return Math.pow(e,2)*((t+1)*e-t)}var backEaseOut=makeEaseOut(back);function bounce(t){for(var e=0,n=1;;e+=n,n/=2)if((7-4*e)/11<=t)return-Math.pow((11-6*e-11*t)/4,2)+Math.pow(n,2)}var bounceEaseOut=makeEaseOut(bounce);function elastic(t,e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}var elasticEaseOut=makeEaseOut(elastic);
"use strict";function ready(e){document.addEventListener("DOMContentLoaded",e)}function addEvent(e,t,n){null!=e&&void 0!==e&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n)}function compareRandom(e,t){return Math.random()-.5}function getDocument(e,t){var n=new XMLHttpRequest;n.open("GET",e),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=(new DOMParser).parseFromString(this.responseText,"text/html");t(e)}},n.send(null)}function getCookie(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}!function(e,t,n){n=n||window;var o=!1;n.addEventListener(e,function(){o||(o=!0,requestAnimationFrame(function(){n.dispatchEvent(new CustomEvent(t)),o=!1}))})}("resize","optimizedResize");
"use strict";var breakpoint={small:767,medium:992,large:1200};function respondTo(i,n,e,t){if(i>=window.innerWidth){var r=!0;e&&requestAnimationFrame(n)}else r=!1;t&&window.addEventListener("optimizedResize",function(){if(!r&&(r=!0,i>=window.innerWidth))return setTimeout(function(){requestAnimationFrame(n)},100),!0;i<=window.innerWidth&&(r=!1)})}function respondFrom(i,n,e,t){if(i<=window.innerWidth){var r=!0;e&&requestAnimationFrame(n)}else r=!1;t&&window.addEventListener("optimizedResize",function(){if(!r&&(r=!0,i<=window.innerWidth))return setTimeout(function(){requestAnimationFrame(n)},100),!0;i>=window.innerWidth&&(r=!1)})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGlvbnMvZnVuVGV4dC5qcyIsImNvbXBvbmVudHMvaGVyby5qcyIsImNvbXBvbmVudHMvcGh5c2ljcy5qcyIsImNvbXBvbmVudHMvdWkuanMiLCJoZWxwZXJzL2FuaW1hdGUuanMiLCJoZWxwZXJzL290aGVycy5qcyIsImhlbHBlcnMvcmVzcG9uZC5qcyJdLCJuYW1lcyI6WyJmdW5UZXh0IiwiZWxlbVRleHQiLCJhbmltYXRlQ2xhc3MiLCJ0ZXh0IiwiaW5uZXJUZXh0IiwiaW5uZXJIVE1MIiwic3ltYm9sIiwiaW5kZXgiLCJzcGxpdCIsInNwYW4iLCJtYXAiLCJjcmVhdGVFbGVtZW50IiwiZG9jdW1lbnQiLCJjbGFzc05hbWUiLCJkaXNwbGF5Iiwic3R5bGUiLCJhbmltYXRpb25EZWxheSIsIkhlcm8iLCJlbGVtSGVybyIsIl90aGlzIiwidGhpcyIsImFjdGl2ZUFjdGlvbnMiLCJxdWVyeVNlbGVjdG9yIiwic3RhdGUiLCJlbGVtU2tpbGxldCIsImFjdGlvbiIsIm5leHRBY3Rpb24iLCJwb3NpdGlvblgiLCJkaXJlY3Rpb24iLCJkaXJlY3Rpb25ZIiwicG9zaXRpb25ZIiwic3BlZWRYIiwiYm9vc3RZIiwicG9zZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsInVuc2V0UG9zZSIsInNldFNraW4iLCJza2luIiwicnVuQWN0aW9uIiwiYWN0aW9uTmFtZSIsImluZGV4T2YiLCJwdXNoIiwiZGVsYXkiLCJhY3Rpb25TdGVwIiwiZHVyYXRpb24iLCJzZXRUaW1lb3V0Iiwic3BsaWNlIiwiYWN0aW9ucyIsIm5hbWUiLCJzcGVlZFkiLCJib29zdFgiLCJzZXRQb3NlIiwiZGFtYWdlIiwiZ2FtZU9iamVjdHMiLCJkaXN0YW5jZSIsImRpc3RhbmNlWSIsImNoYW5nZWREaXJlY3Rpb24iLCJrZXkiLCJNYXRoIiwiYWJzIiwibmV4dFBvc2l0aW9uc1kiLCJwaHlzaWNzIiwiYW5pbWF0aW9uc0xvb3AiLCJhcmVuYSIsInhNYXgiLCJ4TWluIiwibmV4dFBvc2l0aW9uc1giLCJwb3NpdGlvbiIsImJvb3N0Iiwic3BlZWQiLCJ5TWF4IiwidHJhbnNmb3JtIiwiY29uY2F0IiwicG9zTWF4IiwicG9zTWluIiwiVWkiLCJjaGFyQ291bnRlciIsImZvdW5kIiwibWFrZVBocmFzZSIsImxlbmd0aCIsImNoYXJhY3RlcnMiLCJjaGFyYWN0ZXJzTGVuZ3RoIiwiX2xvb3AiLCJfaSIsIm5ld0NoYXIiLCJjaGFyQXQiLCJmbG9vciIsInJhbmRvbSIsImkiLCJlbGVtZW50cyIsImVsZW1lbnQiLCJza2lwIiwicmVzdWx0IiwiZWxlbXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiVWlFbGVtZW50IiwiY29uZmlnIiwibGVuZ3RoUGhyYXNlc0ZvckFjdGlvbnMiLCJzZXRUZXh0IiwidWlFbGVtZW50Iiwic3ltYm9scyIsImVsZW1TeW1ib2xzIiwiYWN0aW9uUGxheWVkIiwicGxheWVyIiwiZWxlbSIsIl90aGlzMiIsImRhdGFzZXQiLCJlbGVtVWlJY29uIiwiYXBwZW5kQ2hpbGQiLCJlbGVtSWNvbiIsImljb24iLCJmYWRlQ2xhc3MiLCJhY3RpdmVEcmF3c0xpc3QiLCJzaG93RnJhbWVSYXRlIiwiYW5pbWF0ZSIsIm9wdGlvbnMiLCJfdHlwZW9mIiwiZnJvbSIsInRvIiwibGluZWFyIiwiZHJhdyIsInByb2dyZXNzIiwiY29uc29sZSIsImxvZyIsImJlZm9yZSIsImFmdGVyIiwic3RhcnQiLCJub3ciLCJmcmFjdGlvbkZyb20iLCJwZXJmb3JtYW5jZSIsInRpbWUiLCJhbmltYXRpb25JbmRleCIsInRpbWVGcmFjdGlvbiIsImZyYWN0aW9uVG8iLCJ0aW1pbmciLCJ0ZXJtaW5hdGlvbkNvbmRpdGlvbiIsImZyYW1lUmF0ZSIsInRpbWVMYXN0Iiwicm91bmQiLCJ0aW1lTm93IiwiY3VycmVudCIsIm1ha2VFYXNlT3V0IiwibWFrZUVhc2VJbk91dCIsInF1YWQiLCJxdWFkRWFzZU91dCIsInNpbiIsImFjb3MiLCJjaXJjRWFzZU91dCIsImJhY2siLCJ4IiwicG93IiwiYmFja0Vhc2VPdXQiLCJib3VuY2UiLCJhIiwiYiIsImJvdW5jZUVhc2VPdXQiLCJlbGFzdGljIiwiY29zIiwiUEkiLCJyZWFkeSIsImxpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50Iiwib2JqZWN0IiwidHlwZSIsImF0dGFjaEV2ZW50IiwiY29tcGFyZVJhbmRvbSIsImdldERvY3VtZW50IiwidXJsIiwiY2FsbGJhY2siLCJodHRwIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsImRvYyIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsInJlc3BvbnNlVGV4dCIsInNlbmQiLCJnZXRDb29raWUiLCJtYXRjaGVzIiwicmVwbGFjZSIsImRlY29kZVVSSUNvbXBvbmVudCIsInVuZGVmaW5lZCIsIm9iaiIsIndpbmRvdyIsInJ1bm5pbmciLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJicmVha3BvaW50Iiwic21hbGwiLCJsYXJnZSIsInJlc3BvbmRUbyIsInJ1bldoZW5DYWxsZWQiLCJpbm5lcldpZHRoIiwiYWN0aXZlIiwicmVzcG9uZEZyb20iXSwibWFwcGluZ3MiOiJhQUFBLFNBQVNBLFFBQVFDLEVBQVVDLEdBQ3ZCLElBQUlDLEVBQU9GLEVBQVNHLFVBRHhCSCxFQUFTRCxVQUFULEdBRUlDLEVBQUFBLE1BQVNJLElBQUFBLElBQVksU0FBQUMsRUFBckJDLEdBRUtDLElBQUxDLEVBQWVDLFNBQUlDLGNBQVNKLFFBQ3BCRSxFQUFnQkUsTUFBVEMsRUFBU0QsU0FBcEJMLEVBQ0FBLEVBQVNBLFVBQVdBLEVBQ2hCRyxFQUFDSixVQUFZQyxFQUNiRyxFQUFDSSxNQUFMQyxRQUFpQlosZUFDYk8sRUFBQ00sTUFBTUQsZUFBWCxJQUFxQlAsRUFBckIsS0FDSU4sRUFBT2UsWUFBWFA7YUNWUixTQUFTUSxLQUFLQyxHQUFVLElBQUFDLEVBQUFDLEtBQ2RDLEVBQWdCLEdB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QUFqQyxHQU9JLEdBQUk2QixHQUFjSixPQUFPUyxXQUFZLENBRHpDLElBQVNGLEdBQVVILEVBQ1hBLEdBQ0lNLHNCQUFKNUIsUUFFSTFJLEdBQUFBLEVBR0FzSyxHQUNQVixPQUFBMUIsaUJBQUEsa0JBQUEsV0FJTyxJQUFLb0MsSUFGQ0EsR0FBQSxFQUNIcEMsR0FBaUIwQixPQUFBUyxZQUtGLE9BSEx2SixXQUFULFdBSVFkLHNCQUFzQjBJLElBSGhCLE1BRUMsRUFHWHNCLEdBQUFKLE9BQUFTLGFBQUFDLEdBQUEsS0FJWCxTQVpEQyxZQUFBUCxFQUFBdEIsRUFBQTBCLEVBQUFqQyxHQWFILEdBQUE2QixHQUFBSixPQUFBUyxXQUFBLENBQ0osSUFBQUMsR0FBQSxFQUtXRixHQUhIRyxzQkFBd0I3QixRQU9yQjRCLEdBQVMsRUFGWm5DLEdBSkx5QixPQUtPMUIsaUJBQUEsa0JBQUEsV0FDQ29DLElBQVNBLElBQ2hCQSxHQUFBLEVBTWVOLEdBQWNKLE9BQU9TLFlBS3JCLE9BUkxuQyxXQUFpQixXQUNQbEksc0JBQUEwSSxJQUNULE1BTVcsRUFGSDFJLEdBQUFBLE9BQXNCMEksYUFBdEI0QixHQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBmdW5UZXh0KGVsZW1UZXh0LCBhbmltYXRlQ2xhc3MpIHtcbiAgICBsZXQgdGV4dCA9IGVsZW1UZXh0LmlubmVyVGV4dDtcbiAgICBlbGVtVGV4dC5pbm5lckhUTUwgPSAnJztcblxuICAgIHRleHQuc3BsaXQoJycpLm1hcCgoc3ltYm9sLCBpbmRleCkgPT4ge1xuICAgICAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgc3ltYm9sID0gc3ltYm9sID09PSAnICcgPyAnJm5ic3A7JyA6IHN5bWJvbDtcbiAgICAgICAgc3Bhbi5pbm5lckhUTUwgPSBzeW1ib2w7XG4gICAgICAgIHNwYW4uY2xhc3NOYW1lID0gYW5pbWF0ZUNsYXNzO1xuICAgICAgICBzcGFuLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICAgICAgc3Bhbi5zdHlsZS5hbmltYXRpb25EZWxheSA9IGluZGV4ICogMTAwICsgJ21zJztcbiAgICAgICAgZWxlbVRleHQuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgfSk7XG59IiwiZnVuY3Rpb24gSGVybyhlbGVtSGVybykge1xuICAgIGNvbnN0IGFjdGl2ZUFjdGlvbnMgPSBbXTtcbiAgICBjb25zdCBlbGVtU2tpbGxldCA9IGVsZW1IZXJvLnF1ZXJ5U2VsZWN0b3IoJy5oZXJvX19za2lsbGV0JylcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgIGFjdGlvbjogZmFsc2UsXG4gICAgICAgIG5leHRBY3Rpb246IGZhbHNlLFxuICAgICAgICBwb3NlOiBudWxsLFxuICAgICAgICBkaXJlY3Rpb246IDEsXG4gICAgICAgIGRpcmVjdGlvblk6IDEsXG4gICAgICAgIHBvc2l0aW9uWDogMCxcbiAgICAgICAgcG9zaXRpb25ZOiAwLFxuICAgICAgICBzcGVlZFg6IDAsXG4gICAgICAgIGJvb3N0WDogMCxcbiAgICAgICAgc3BlZWRZOiAwLFxuICAgICAgICBib29zdFk6IDBcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRQb3NlID0gKHBvc2UpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucG9zZSkge1xuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICBlbGVtSGVyby5jbGFzc0xpc3QucmVtb3ZlKCdoZXJvXycgKyB0aGlzLnN0YXRlLnBvc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocG9zZSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5wb3NlID0gcG9zZTtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZWxlbUhlcm8uY2xhc3NMaXN0LmFkZCgnaGVyb18nICsgcG9zZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICB0aGlzLnVuc2V0UG9zZSA9IChwb3NlKSA9PiB7XG4gICAgICAgIHRoaXMuc3RhdGUucG9zZSA9IG51bGw7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZWxlbUhlcm8uY2xhc3NMaXN0LnJlbW92ZSgnaGVyb18nICsgcG9zZSk7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzog0JLQvtC30LzQvtC20L3QviDQvdGD0LbQvdC+INCx0YPQtNC10YIg0LLQvtC30LLRgNCw0YnQsNGC0Ywg0L/RgNC10LTRi9C00YPRidGD0Y4g0L/QvtC30YNcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICB0aGlzLnNldFNraW4gPSAoc2tpbikgPT4ge1xuICAgICAgICBlbGVtSGVyby5jbGFzc0xpc3QucmVtb3ZlKCdoZXJvXycgKyB0aGlzLnN0YXRlLnNraW4pO1xuICAgICAgICB0aGlzLnN0YXRlLnNraW4gPSBza2luO1xuICAgICAgICBpZiAoc2tpbikge1xuICAgICAgICAgICAgZWxlbUhlcm8uY2xhc3NMaXN0LmFkZCgnaGVyb18nICsgc2tpbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIHRoaXMucnVuQWN0aW9uID0gKGFjdGlvbk5hbWUsIGRpcmVjdGlvbikgPT4ge1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAxIHx8IGRpcmVjdGlvbiA9PT0gLTEpIHtcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gIT09IHRoaXMuc3RhdGUuZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zcGVlZFggPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFjdGl2ZUFjdGlvbnMuaW5kZXhPZiggYWN0aW9uTmFtZSApICE9PSAtMSApIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUubmV4dEFjdGlvbiA9IFthY3Rpb25OYW1lLCBkaXJlY3Rpb25dO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhY3Rpb24gPSBhY3Rpb25zW2FjdGlvbk5hbWVdID8gYWN0aW9uc1thY3Rpb25OYW1lXSA6IGZhbHNlO1xuICAgICAgICBpZiAoIWFjdGlvbikgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgYWN0aXZlQWN0aW9ucy5wdXNoKGFjdGlvbk5hbWUpO1xuXG4gICAgICAgIGxldCBkZWxheSA9IDA7XG4gICAgICAgIGFjdGlvbi5tYXAoKGFjdGlvblN0ZXAsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGFjdGlvblN0ZXAuYWN0aW9uLCBkZWxheSk7XG4gICAgICAgICAgICBkZWxheSArPSBhY3Rpb25TdGVwLmR1cmF0aW9uID8gYWN0aW9uU3RlcC5kdXJhdGlvbiA6IDA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgYWN0aXZlQWN0aW9ucy5zcGxpY2UoYWN0aXZlQWN0aW9ucy5pbmRleE9mKGFjdGlvbk5hbWUsIDEpKTtcblxuICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5uZXh0QWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ydW5BY3Rpb24odGhpcy5zdGF0ZS5uZXh0QWN0aW9uWzBdLCB0aGlzLnN0YXRlLm5leHRBY3Rpb25bMV0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubmV4dEFjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBkZWxheSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGNvbnN0IGFjdGlvbnMgPSB7XG4gICAgICAgICdqdW1wJzogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdqdW1wLXN0YXJ0JyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMCxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXRlLnBvc2l0aW9uWSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc3BlZWRZID0gNjA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmJvb3N0WCA9IDQwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICAnZG93bicgOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2Rvd24tc3RhcnQnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9zZSgnZG93bicpOztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdkb3duLWVuZCcsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zZXRQb3NlKCdkb3duJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICAnbW92ZScgOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ1N0ZXAxJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmJvb3N0WCA9IDM1O1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc3RhdGUucG9zZSkgdGhpcy5zZXRQb3NlKCdzdGVwLTEnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdTdGVwMicsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnNldFBvc2UoJ3N0ZXAtMScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc3RhdGUucG9zZSkgdGhpcy5zZXRQb3NlKCdzdGVwLTInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdzdG9wJyxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnNldFBvc2UoJ3N0ZXAtMicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgJ2RhbWFnZScgOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ3Rha2VEYW1hZ2VTdGFydCcsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQb3NlKCdkYW1hZ2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICd0YWtlRGFtYWdlRW5kJyxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnNldFBvc2UoJ2RhbWFnZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgJ2hpdCcgOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2hpdDEnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9zZSgnaGl0LTEnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdoaXQyJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc2V0UG9zZSgnaGl0LTEnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQb3NlKCdoaXQtMicpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY2hhbmdlZERpcmVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZ2FtZU9iamVjdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZU9iamVjdHNba2V5XSAhPT0gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlzdGFuY2UgPSAgZ2FtZU9iamVjdHNba2V5XS5zdGF0ZS5wb3NpdGlvblggLSB0aGlzLnN0YXRlLnBvc2l0aW9uWDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpc3RhbmNlWSA9IGdhbWVPYmplY3RzW2tleV0uc3RhdGUucG9zaXRpb25ZIC0gdGhpcy5zdGF0ZS5wb3NpdGlvblk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRpc3RhbmNlKSA8PSAyMDAgJiYgTWF0aC5hYnMoZGlzdGFuY2VZKSA8IDEwMCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNoYW5nZWREaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZGlyZWN0aW9uID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZU9iamVjdHNba2V5XS5zdGF0ZS5kaXJlY3Rpb24gPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmRpcmVjdGlvbiA9IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lT2JqZWN0c1trZXldLnN0YXRlLmRpcmVjdGlvbiA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWREaXJlY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5kaXJlY3Rpb24gKyBnYW1lT2JqZWN0c1trZXldLnN0YXRlLmRpcmVjdGlvbiA9PT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGRpc3RhbmNlICogdGhpcy5zdGF0ZS5kaXJlY3Rpb24gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZU9iamVjdHNba2V5XS5zdGF0ZS5zcGVlZFggPSAtNTA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZU9iamVjdHNba2V5XS5ydW5BY3Rpb24oJ2RhbWFnZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdoaXRFbmQnLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc2V0UG9zZSgnaGl0LTInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICB9O1xuXG4gICAgYW5pbWF0aW9uc0xvb3AucHVzaCgodGltZSkgPT4ge1xuICAgICAgICBsZXQgbmV4dFBvc2l0aW9uc1ggPSBwaHlzaWNzKFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5wb3NpdGlvblgsXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmJvb3N0WCxcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuc3BlZWRYLFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5kaXJlY3Rpb24sXG4gICAgICAgICAgICBhcmVuYS54TWF4LFxuICAgICAgICAgICAgYXJlbmEueE1pbik7XG5cbiAgICAgICAgdGhpcy5zdGF0ZS5wb3NpdGlvblggPSBuZXh0UG9zaXRpb25zWC5wb3NpdGlvbjtcbiAgICAgICAgdGhpcy5zdGF0ZS5ib29zdFggPSBuZXh0UG9zaXRpb25zWC5ib29zdDtcbiAgICAgICAgdGhpcy5zdGF0ZS5zcGVlZFggPSBuZXh0UG9zaXRpb25zWC5zcGVlZDtcbiAgICAgICAgdGhpcy5zdGF0ZS5kaXJlY3Rpb24gPSBuZXh0UG9zaXRpb25zWC5kaXJlY3Rpb247XG5cbiAgICAgICAgbGV0IG5leHRQb3NpdGlvbnNZID0gcGh5c2ljcyhcbiAgICAgICAgICAgIHRoaXMuc3RhdGUucG9zaXRpb25ZLFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5ib29zdFksXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNwZWVkWSxcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZGlyZWN0aW9uWSxcbiAgICAgICAgICAgIGFyZW5hLnlNYXgsXG4gICAgICAgICAgICBhcmVuYS55TWluKTtcblxuICAgICAgICB0aGlzLnN0YXRlLnBvc2l0aW9uWSA9IG5leHRQb3NpdGlvbnNZLnBvc2l0aW9uO1xuICAgICAgICB0aGlzLnN0YXRlLmJvb3N0WSA9IG5leHRQb3NpdGlvbnNZLmJvb3N0O1xuICAgICAgICB0aGlzLnN0YXRlLnNwZWVkWSA9IG5leHRQb3NpdGlvbnNZLnNwZWVkO1xuICAgICAgICB0aGlzLnN0YXRlLmRpcmVjdGlvblkgPSBuZXh0UG9zaXRpb25zWS5kaXJlY3Rpb247XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc3BlZWRZID09PSAwICYmIHRoaXMuc3RhdGUucG9zaXRpb25ZID4gMCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5kaXJlY3Rpb25ZID0gLTE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5kaXJlY3Rpb25ZID09PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zcGVlZFkgKz0gMztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnBvc2l0aW9uWSA8PSAwICYmIHRoaXMuc3RhdGUuc3BlZWRZIDwgODApIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYm9vc3RZID0gMDtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuc3BlZWRZID0gMDtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUucG9zaXRpb25ZID0gMDtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZGlyZWN0aW9uWSA9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5wb3NlID09PSAnanVtcCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBvc2UoJ2xhbmRlZCcpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc2V0UG9zZSgnbGFuZGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zZXRQb3NlKCdqdW1wJyk7XG4gICAgICAgICAgICAgICAgfSwzMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc3BlZWRZID4gMCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXRlLnBvc2UpIHRoaXMuc2V0UG9zZSgnanVtcCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51bnNldFBvc2UoJ2p1bXAnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsZW1IZXJvLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHt0aGlzLnN0YXRlLnBvc2l0aW9uWH0lLCAkey10aGlzLnN0YXRlLnBvc2l0aW9uWX0lKWA7XG4gICAgICAgIGVsZW1Ta2lsbGV0LnN0eWxlLnRyYW5zZm9ybSA9IGBzY2FsZVgoJHt0aGlzLnN0YXRlLmRpcmVjdGlvbn0pYDtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzO1xufVxuIiwiZnVuY3Rpb24gcGh5c2ljcyhwb3NpdGlvbiwgYm9vc3QsIHNwZWVkLCBkaXJlY3Rpb24sIHBvc01heCwgcG9zTWluKSB7XG4gICAgc3BlZWQgPSBNYXRoLmFicyhzcGVlZCkgPCAxID8gMCA6IHNwZWVkO1xuICAgIGJvb3N0ID0gYm9vc3QgPD0gMCA/IDAgOiBib29zdDtcblxuICAgIGlmIChib29zdCA+IDApIHtcbiAgICAgICAgYm9vc3QgLT0gMSArIChNYXRoLmFicyhib29zdCkgLyAxMDApO1xuICAgICAgICBzcGVlZCArPSAxICsgKE1hdGguYWJzKGJvb3N0KSAvIDEwMCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNwZWVkICE9PSAwICYmIHNwZWVkID4gMCkge1xuICAgICAgICBzcGVlZCAtPSAxICsgKE1hdGguYWJzKHNwZWVkKSAvIDEwMCk7XG4gICAgfSBlbHNlIGlmIChzcGVlZCAhPT0gMCAmJiBzcGVlZCA8IDApIHtcbiAgICAgICAgc3BlZWQgKz0gMSArIChNYXRoLmFicyhzcGVlZCkgLyAxMDApO1xuICAgIH1cblxuICAgIHBvc2l0aW9uID0gcG9zaXRpb24gKyBzcGVlZCAvIDEwICogZGlyZWN0aW9uO1xuXG4gICAgaWYgKHBvc2l0aW9uID4gcG9zTWF4KSB7XG4gICAgICAgIGRpcmVjdGlvbiA9IHNwZWVkID4gMCA/IC0xIDogMTtcbiAgICB9IGVsc2UgaWYgKHBvc2l0aW9uIDwgcG9zTWluKSB7XG4gICAgICAgIGRpcmVjdGlvbiA9IHNwZWVkID4gMCA/IDEgOiAtMTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgICAgIGJvb3N0IDogYm9vc3QsXG4gICAgICAgIHNwZWVkIDogc3BlZWQsXG4gICAgICAgIGRpcmVjdGlvbiA6IGRpcmVjdGlvblxuICAgIH1cbn07XG4iLCJmdW5jdGlvbiBVaSAoKSB7XG4gICAgbGV0IGNoYXJDb3VudGVyID0gMDtcbiAgICBsZXQgZm91bmQgPSAtMTtcblxuICAgIHRoaXMubWFrZVBocmFzZSA9IChsZW5ndGgpID0+IHtcbiAgICAgICAgbGV0IHJlc3VsdCAgICAgICAgICAgPSAnJztcbiAgICAgICAgbGV0IGNoYXJhY3RlcnMgICAgICAgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonO1xuICAgICAgICAvLyBjaGFyYWN0ZXJzICAgICAgICAgICs9ICfQsNCx0LLQs9C00LXQttC30LjQudC60LvQvNC90L7Qv9GA0YHRgtGD0YTRhdGG0YfRiNGJ0YrRi9GM0Y3RjtGPJztcbiAgICAgICAgLy8gY2hhcmFjdGVycyAgICAgICAgICArPSAnMDEyMzQ1Njc4OSc7XG4gICAgICAgIC8vIGNoYXJhY3RlcnMgICAgICAgICAgKz0gJyFAIyQlXiYqKClfK1tde31cXHw7OlxcJ1wiPD4sLj8vJztcblxuICAgICAgICBsZXQgY2hhcmFjdGVyc0xlbmd0aCAgICAgPSBjaGFyYWN0ZXJzLmxlbmd0aDtcbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG4gICAgICAgICAgICBsZXQgbmV3Q2hhciA9IGNoYXJhY3RlcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJhY3RlcnNMZW5ndGgpKTtcbiAgICAgICAgICAgIGxldCBza2lwID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMubWFwKChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zeW1ib2xzWzBdID09PSBuZXdDaGFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICBza2lwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFza2lwKSByZXN1bHQgKz0gbmV3Q2hhcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICB0aGlzLmVsZW1lbnRzID0gW107XG4gICAgbGV0IGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnVpX19lbGVtZW50Jyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmVsZW1lbnRzW2ldID0gbmV3IFVpRWxlbWVudChlbGVtc1tpXSk7XG4gICAgICAgIGxldCBsZW5ndGggPSA0O1xuICAgICAgICBpZiAoY29uZmlnLmxlbmd0aFBocmFzZXNGb3JBY3Rpb25zW3RoaXMuZWxlbWVudHNbaV0uYWN0aW9uXSkge1xuICAgICAgICAgICAgbGVuZ3RoID0gY29uZmlnLmxlbmd0aFBocmFzZXNGb3JBY3Rpb25zW3RoaXMuZWxlbWVudHNbaV0uYWN0aW9uXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVsZW1lbnRzW2ldLnNldFRleHQodGhpcy5tYWtlUGhyYXNlKGxlbmd0aCkpO1xuICAgIH1cblxuICAgIHRoaXMuZm91bmQgPSAoa2V5KSA9PiB7XG4gICAgICAgIGxldCBhY3Rpb25QbGF5ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKGZvdW5kIDwgMCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5tYXAoKHVpRWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodWlFbGVtZW50LnN5bWJvbHNbY2hhckNvdW50ZXJdID09PSBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgdWlFbGVtZW50LmVsZW1TeW1ib2xzW2NoYXJDb3VudGVyXS5jbGFzc0xpc3QuYWRkKCdmYWRlT3V0RG93bicpO1xuICAgICAgICAgICAgICAgICAgICB1aUVsZW1lbnQuZWxlbVRleHQuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEuNSknO1xuICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IGluZGV4O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVpRWxlbWVudC5lbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjaGFyQ291bnRlcisrO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudHNbZm91bmRdLnN5bWJvbHNbY2hhckNvdW50ZXJdID09PSBrZXkpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNbZm91bmRdLmVsZW1TeW1ib2xzW2NoYXJDb3VudGVyXS5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlSW4nKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNbZm91bmRdLmVsZW1TeW1ib2xzW2NoYXJDb3VudGVyXS5jbGFzc0xpc3QuYWRkKCdmYWRlT3V0RG93bicpO1xuICAgICAgICAgICAgY2hhckNvdW50ZXIrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNbZm91bmRdLnNldFRleHQodGhpcy5tYWtlUGhyYXNlKHRoaXMuZWxlbWVudHNbZm91bmRdLnRleHQubGVuZ3RoKSk7XG4gICAgICAgICAgICBmb3VuZCA9IC0xO1xuICAgICAgICAgICAgY2hhckNvdW50ZXIgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvdW5kID49IDAgJiYgdGhpcy5lbGVtZW50c1tmb3VuZF0uc3ltYm9scy5sZW5ndGggPT09IGNoYXJDb3VudGVyKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzW2ZvdW5kXS5zZXRUZXh0KHRoaXMubWFrZVBocmFzZSh0aGlzLmVsZW1lbnRzW2ZvdW5kXS50ZXh0Lmxlbmd0aCkpO1xuICAgICAgICAgICAgZ2FtZU9iamVjdHMucGxheWVyLnJ1bkFjdGlvbih0aGlzLmVsZW1lbnRzW2ZvdW5kXS5hY3Rpb24gLCArdGhpcy5lbGVtZW50c1tmb3VuZF0uZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIGZvdW5kID0gLTE7XG4gICAgICAgICAgICBjaGFyQ291bnRlciA9IDA7XG4gICAgICAgICAgICBhY3Rpb25QbGF5ZWQgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKGZvdW5kID49IDAgKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzW2ZvdW5kXS5lbGVtU3ltYm9sc1tjaGFyQ291bnRlcl0uY2xhc3NMaXN0LmFkZCgndWlfX3N5bWJvbF9zZWxlY3RlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvdW5kIDwgMCl7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLm1hcCgodWlFbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIHVpRWxlbWVudC5lbGVtLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICB1aUVsZW1lbnQuZWxlbVRleHQuc3R5bGUudHJhbnNmb3JtID0gJyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvdW5kID0gLTE7XG4gICAgICAgICAgICBjaGFyQ291bnRlciA9IDA7XG5cbiAgICAgICAgICAgIGlmIChhY3Rpb25QbGF5ZWQpIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbn1cblxuXG5mdW5jdGlvbiBVaUVsZW1lbnQgKGVsZW0pIHtcbiAgICB0aGlzLmVsZW0gPSBlbGVtO1xuICAgIHRoaXMudGV4dCA9ICcnO1xuICAgIHRoaXMuYWN0aW9uID0gZWxlbS5kYXRhc2V0LmFjdGlvbjtcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGVsZW0uZGF0YXNldC5kaXJlY3Rpb247XG4gICAgdGhpcy5pY29uID0gZWxlbS5kYXRhc2V0Lmljb247XG4gICAgdGhpcy5zeW1ib2xzID0gW107XG4gICAgdGhpcy5lbGVtU3ltYm9scyA9IFtdO1xuXG4gICAgdGhpcy5lbGVtVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuZWxlbVRleHQuY2xhc3NMaXN0LmFkZCgndWlfX3RleHQnKTtcbiAgICB0aGlzLmVsZW0uYXBwZW5kQ2hpbGQodGhpcy5lbGVtVGV4dCk7XG5cbiAgICB0aGlzLmVsZW1VaUljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmVsZW1VaUljb24uY2xhc3NMaXN0LmFkZCgndWlfX2ljb24nKTtcbiAgICB0aGlzLmVsZW0uYXBwZW5kQ2hpbGQodGhpcy5lbGVtVWlJY29uKTtcblxuICAgIHRoaXMuZWxlbUljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmVsZW1JY29uLmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICB0aGlzLmVsZW1JY29uLmNsYXNzTGlzdC5hZGQoJ2ljb25fJyArIHRoaXMuaWNvbik7XG4gICAgdGhpcy5lbGVtVWlJY29uLmFwcGVuZENoaWxkKHRoaXMuZWxlbUljb24pO1xuXG5cbiAgICB0aGlzLnNldFRleHQgPSAodGV4dCkgPT4ge1xuICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgICAgICB0aGlzLmVsZW1UZXh0LmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgIGxldCBmYWRlQ2xhc3MgPSAnZmFkZUluJztcbiAgICAgICAgbGV0IGRlbGF5ID0gMTAwO1xuICAgICAgICB0aGlzLnRleHQuc3BsaXQoJycpLm1hcCgoc3ltYm9sLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgbGV0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBzeW1ib2wgPSBzeW1ib2wgPT09ICcgJyA/ICcmbmJzcDsnIDogc3ltYm9sO1xuICAgICAgICAgICAgdGhpcy5zeW1ib2xzW2luZGV4XSA9IHN5bWJvbDtcbiAgICAgICAgICAgIHNwYW4uaW5uZXJIVE1MID0gc3ltYm9sO1xuICAgICAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSAndWlfX3N5bWJvbCAnICsgZmFkZUNsYXNzO1xuICAgICAgICAgICAgc3Bhbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgICAgICAgICBzcGFuLnN0eWxlLmFuaW1hdGlvbkRlbGF5ID0gaW5kZXggKiBkZWxheSArICdtcyc7XG4gICAgICAgICAgICB0aGlzLmVsZW1TeW1ib2xzW2luZGV4XSA9IHNwYW47XG4gICAgICAgICAgICB0aGlzLmVsZW1UZXh0LmFwcGVuZENoaWxkKHNwYW4pO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgc3Bhbi5jbGFzc0xpc3QucmVtb3ZlKGZhZGVDbGFzcyk7XG4gICAgICAgICAgICB9LCAoaW5kZXggKyAxKSAqIGRlbGF5KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gIHJldHVybiB0aGlzO1xufVxuIiwidmFyIGFjdGl2ZURyYXdzTGlzdCA9IFtdO1xudmFyIHNob3dGcmFtZVJhdGUgPSBmYWxzZTtcblxuZnVuY3Rpb24gYW5pbWF0ZShvcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgID0gKHR5cGVvZihvcHRpb25zKSAgICAgICAgICA9PSAnb2JqZWN0JykgICA/IG9wdGlvbnMgICAgICAgICAgOiB7fTtcbiAgICB2YXIgZHVyYXRpb24gPSAodHlwZW9mKG9wdGlvbnMuZHVyYXRpb24pID09ICdudW1iZXInKSAgID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDA7XG4gICAgdmFyIGRlbGF5ICAgID0gKHR5cGVvZihvcHRpb25zLmRlbGF5KSAgICA9PSAnbnVtYmVyJykgICA/IG9wdGlvbnMuZGVsYXkgICAgOiAwO1xuICAgIHZhciBmcm9tICAgICA9ICh0eXBlb2Yob3B0aW9ucy5mcm9tKSAgICAgPT0gJ251bWJlcicpICAgPyBvcHRpb25zLmZyb20gICAgIDogMTtcbiAgICB2YXIgdG8gICAgICAgPSAodHlwZW9mKG9wdGlvbnMudG8pICAgICAgID09ICdudW1iZXInKSAgID8gb3B0aW9ucy50byAgICAgICA6IDEwMDtcbiAgICB2YXIgdGltaW5nICAgPSAodHlwZW9mKG9wdGlvbnMudGltaW5nKSAgID09ICdmdW5jdGlvbicpID8gb3B0aW9ucy50aW1pbmcgICA6IGxpbmVhcjtcbiAgICB2YXIgZHJhdyAgICAgPSAodHlwZW9mKG9wdGlvbnMuZHJhdykgICAgID09ICdmdW5jdGlvbicpID8gb3B0aW9ucy5kcmF3ICAgICA6IGZ1bmN0aW9uKHByb2dyZXNzKXtjb25zb2xlLmxvZyhwcm9ncmVzcyAqIDEwMCl9O1xuICAgIHZhciBiZWZvcmUgICA9ICh0eXBlb2Yob3B0aW9ucy5iZWZvcmUpICAgPT0gJ2Z1bmN0aW9uJykgPyBvcHRpb25zLmJlZm9yZSAgIDogZnVuY3Rpb24oKSB7fTtcbiAgICB2YXIgYWZ0ZXIgICAgPSAodHlwZW9mKG9wdGlvbnMuYWZ0ZXIpICAgID09ICdmdW5jdGlvbicpID8gb3B0aW9ucy5hZnRlciAgICA6IGZ1bmN0aW9uKCkge307XG5cbiAgICB2YXIgZnJhY3Rpb25Gcm9tID0gZnJvbSAvIDEwMDtcbiAgICB2YXIgZnJhY3Rpb25UbyAgID0gdG8gLyAxMDA7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc3RhcnQgICAgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgdmFyIHRpbWVMYXN0ID0gc3RhcnQ7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IGFjdGl2ZURyYXdzTGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYgKGFjdGl2ZURyYXdzTGlzdFtpXSA9PT0gZHJhdykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgYW5pbWF0aW9uSW5kZXggPSBhY3RpdmVEcmF3c0xpc3QucHVzaChkcmF3KTtcblxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gYW5pbWF0ZSh0aW1lKSB7XG4gICAgICAgICAgICBpZiAoYmVmb3JlKSB7XG4gICAgICAgICAgICAgICAgYmVmb3JlKCk7XG4gICAgICAgICAgICAgICAgYmVmb3JlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGltZUZyYWN0aW9uID0gKHRpbWUgLSBzdGFydCkgLyBkdXJhdGlvbjtcbiAgICAgICAgICAgIGlmICh0aW1lRnJhY3Rpb24gPiAxKSB0aW1lRnJhY3Rpb24gPSAxO1xuXG4gICAgICAgICAgICBpZiAoZnJhY3Rpb25Gcm9tIDwgZnJhY3Rpb25Ubykge1xuICAgICAgICAgICAgICAgIHRpbWVGcmFjdGlvbiA9IHRpbWVGcmFjdGlvbiArIGZyYWN0aW9uRnJvbTtcbiAgICAgICAgICAgICAgICB2YXIgdGVybWluYXRpb25Db25kaXRpb24gPSB0aW1lRnJhY3Rpb24gPCBmcmFjdGlvblRvO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aW1lRnJhY3Rpb24gPSAtKHRpbWVGcmFjdGlvbiAtIGZyYWN0aW9uRnJvbSk7XG4gICAgICAgICAgICAgICAgdmFyIHRlcm1pbmF0aW9uQ29uZGl0aW9uID0gdGltZUZyYWN0aW9uID4gZnJhY3Rpb25UbztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gdGltaW5nKHRpbWVGcmFjdGlvbik7XG5cbiAgICAgICAgICAgIGRyYXcocHJvZ3Jlc3MpO1xuXG4gICAgICAgICAgICBpZiAodGVybWluYXRpb25Db25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2hvd0ZyYW1lUmF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmcmFtZVJhdGUodGltZUxhc3QsIHRpbWUpLCBNYXRoLnJvdW5kKHRpbWVGcmFjdGlvbiAqIDEwMCkpO1xuICAgICAgICAgICAgICAgICAgICB0aW1lTGFzdCA9IHRpbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhY3RpdmVEcmF3c0xpc3Quc3BsaWNlKGFjdGl2ZURyYXdzTGlzdC5pbmRleE9mKGRyYXcpLCAxKTtcbiAgICAgICAgICAgICAgICBpZiAoYWZ0ZXIpIGFmdGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sIGRlbGF5KTtcbn1cblxuZnVuY3Rpb24gZnJhbWVSYXRlKHRpbWVMYXN0LCB0aW1lTm93KSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoMTAwMCAvICh0aW1lTm93IC0gdGltZUxhc3QpKTtcbn1cblxuZnVuY3Rpb24gem9uZShjdXJyZW50LCBmcm9tLCB0bywgZHJhdykge1xuICAgIGN1cnJlbnQgPSBjdXJyZW50ICogMTAwO1xuICAgIGZyb20gICAgPSBmcm9tICogMTAwO1xuICAgIHRvICAgICAgPSB0byAqIDEwMDtcbiAgICBkcmF3ICAgID0gZHJhdyAqIDEwMDtcblxuICAgIGlmIChjdXJyZW50ID49IGZyb20gJiYgY3VycmVudCA8PSB0bykge1xuICAgICAgICB2YXIgcHJvZ3Jlc3MgPSAoY3VycmVudCAtIGZyb20pIC8gKHRvIC0gZnJvbSk7XG4gICAgICAgIGlmIChkcmF3KSBkcmF3KHByb2dyZXNzKTtcbiAgICAgICAgcmV0dXJuIHByb2dyZXNzO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudCA8PSBmcm9tKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudCA+PSB0bykge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG59XG5cblxuLy8g0L/RgNC10L7QsdGA0LDQt9C+0LLQsNGC0LXQu9GMINCyIGVhc2VPdXRcbmZ1bmN0aW9uIG1ha2VFYXNlT3V0KHRpbWluZykge1xuICAgIHJldHVybiBmdW5jdGlvbih0aW1lRnJhY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIDEgLSB0aW1pbmcoMSAtIHRpbWVGcmFjdGlvbik7XG4gICAgfVxufVxuLy8g0L/RgNC10L7QsdGA0LDQt9C+0LLQsNGC0LXQu9GMINCyIGVhc2VPdXRcbmZ1bmN0aW9uIG1ha2VFYXNlSW5PdXQodGltaW5nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHRpbWVGcmFjdGlvbikge1xuICAgICAgICBpZiAodGltZUZyYWN0aW9uIDwgMC41KVxuICAgICAgICAgICAgcmV0dXJuIHRpbWluZygyICogdGltZUZyYWN0aW9uKSAvIDI7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiAoMiAtIHRpbWluZygyICogKDEgLSB0aW1lRnJhY3Rpb24pKSkgLyAyO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbGluZWFyKHByb2dyZXNzKSB7XG4gICAgcmV0dXJuIHByb2dyZXNzO1xufVxuXG5mdW5jdGlvbiBxdWFkKHByb2dyZXNzKSB7XG4gICAgcmV0dXJuIE1hdGgucG93KHByb2dyZXNzLCAyKTtcbn1cbnZhciBxdWFkRWFzZU91dCA9IG1ha2VFYXNlT3V0KHF1YWQpO1xuXG5mdW5jdGlvbiBjaXJjKHRpbWVGcmFjdGlvbikge1xuICAgIHJldHVybiAxIC0gTWF0aC5zaW4oTWF0aC5hY29zKHRpbWVGcmFjdGlvbikpXG59XG52YXIgY2lyY0Vhc2VPdXQgPSBtYWtlRWFzZU91dChjaXJjKTtcblxuZnVuY3Rpb24gYmFjayh4LCB0aW1lRnJhY3Rpb24pIHtcbiAgICByZXR1cm4gTWF0aC5wb3codGltZUZyYWN0aW9uLCAyKSAqICgoeCArIDEpICogdGltZUZyYWN0aW9uIC0geClcbn1cbnZhciBiYWNrRWFzZU91dCA9IG1ha2VFYXNlT3V0KGJhY2spO1xuXG5mdW5jdGlvbiBib3VuY2UocHJvZ3Jlc3MpIHtcbiAgICBmb3IgKHZhciBhID0gMCwgYiA9IDEsIHJlc3VsdDsgMTsgYSArPSBiLCBiIC89IDIpIHtcbiAgICAgICAgaWYgKHByb2dyZXNzID49ICg3IC0gNCAqIGEpIC8gMTEpIHtcbiAgICAgICAgICAgIHJldHVybiAtTWF0aC5wb3coKDExIC0gNiAqIGEgLSAxMSAqIHByb2dyZXNzKSAvIDQsIDIpICsgTWF0aC5wb3coYiwgMik7XG4gICAgICAgIH1cbiAgICB9XG59XG52YXIgYm91bmNlRWFzZU91dCA9IG1ha2VFYXNlT3V0KGJvdW5jZSk7XG5cbmZ1bmN0aW9uIGVsYXN0aWMoeCwgdGltZUZyYWN0aW9uKSB7XG4gICAgcmV0dXJuIE1hdGgucG93KDIsIDEwICogKHRpbWVGcmFjdGlvbiAtIDEpKSAqIE1hdGguY29zKDIwICogTWF0aC5QSSAqIHggLyAzICogdGltZUZyYWN0aW9uKVxufVxudmFyIGVsYXN0aWNFYXNlT3V0ID0gbWFrZUVhc2VPdXQoZWxhc3RpYyk7XG4iLCIvKipcbiAqINCh0L7QutGA0LDRidC10L3QuNC1INC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDRgdC+0LHRi9GC0LjRjyBET01Db250ZW50TG9hZGVkXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBD0LvRg9GI0LDRgtC10LvRjCDRgdC+0LHRi9GC0LjRj1xuICovXG5mdW5jdGlvbiByZWFkeShsaXN0ZW5lcikge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGxpc3RlbmVyKTtcbn1cblxuLyoqXG4gKiBDdXN0b20gRXZlbnQgUmVzaXplXG4gKi9cbihmdW5jdGlvbigpIHtcbiAgICB2YXIgdGhyb3R0bGUgPSBmdW5jdGlvbih0eXBlLCBuYW1lLCBvYmopIHtcbiAgICAgICAgb2JqID0gb2JqIHx8IHdpbmRvdztcbiAgICAgICAgdmFyIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgdmFyIGZ1bmMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7IHJldHVybjsgfVxuICAgICAgICAgICAgcnVubmluZyA9IHRydWU7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgb2JqLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KG5hbWUpKTtcbiAgICAgICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuYyk7XG4gICAgfTtcblxuICAgIC8qIGluaXQgLSB5b3UgY2FuIGluaXQgYW55IGV2ZW50ICovXG4gICAgdGhyb3R0bGUoXCJyZXNpemVcIiwgXCJvcHRpbWl6ZWRSZXNpemVcIik7XG59KSgpO1xuXG5cbi8qKlxuICog0JTQvtCx0LDQstC70LXQvdC40LUg0YHQvtCx0YvRgtC40LlcbiAqIEBwYXJhbSB7W3R5cGVdfSAgIG9iamVjdCAgIERPTSDRg9C30LXQu1xuICogQHBhcmFtIHtzdHJpbmd9ICAgdHlwZSAgICAg0KLQuNC/INC/0YDQvtGB0LvRg9GI0LjQstCw0LXQvNC+0LPQviDRgdC+0LHRi9GC0LjRjy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIEPQu9GD0YjQsNGC0LXQu9GMINGB0L7QsdGL0YLQuNGPXG4gKi9cbmZ1bmN0aW9uIGFkZEV2ZW50KG9iamVjdCwgdHlwZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAob2JqZWN0ID09IG51bGwgfHwgdHlwZW9mKG9iamVjdCkgPT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcbiAgICBpZiAob2JqZWN0LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgb2JqZWN0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKG9iamVjdC5hdHRhY2hFdmVudCkge1xuICAgICAgICBvYmplY3QuYXR0YWNoRXZlbnQoXCJvblwiICsgdHlwZSwgbGlzdGVuZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdFtcIm9uXCIgKyB0eXBlXSA9IGxpc3RlbmVyO1xuICAgIH1cbn07XG5cbi8qKlxuICog0YFvbXBhcmVGdW5jdGlvbiDQtNC70Y8gYXJyLnNvcnQsINC00LvRjyDRgdC+0YDRgtC40YDQvtC60Lgg0YHQu9GD0YfQudC90L7QvCDQv9C+0YDRj9C00LrQtVxuICovXG5mdW5jdGlvbiBjb21wYXJlUmFuZG9tKGEsIGIpIHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAtIDAuNTtcbn1cblxuLyoqXG4gKiDQn9C+0LvRg9GH0LXQvdC40LUgRE9NINC00LXRgNC10LLQsCDQtNGA0YPQs9C+0Lkg0YHRgtGA0LDQvdC40YbRi1xuICogQHBhcmFtICB7U3RyaW5nfSAgIHVybCAgICAgIFVSTCDRgdGC0YDQsNC90LjRhtGLXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gY2FsbGJhY2sg0J/QtdGA0LXQtNCw0LLQsNC10LzQsNGPINGE0YPQvdC60YbQuNGPXG4gKi9cbmZ1bmN0aW9uIGdldERvY3VtZW50KHVybCwgY2FsbGJhY2spXG57XG4gIHZhciBodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gIGh0dHAub3BlbignR0VUJywgdXJsKTtcbiAgaHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKVxuICB7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0ICYmIHRoaXMuc3RhdHVzID09IDIwMCkge1xuICAgICAgdmFyIGRvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcodGhpcy5yZXNwb25zZVRleHQsIFwidGV4dC9odG1sXCIpOyAgLy8g0L/RgNC10L7QsdGA0LDQt9C+0LLQsNGC0Ywg0YLQtdC60YHRgiDQsiBIVE1MXG5cbiAgICAgIGNhbGxiYWNrKGRvYyk7XG4gICAgfVxuICB9XG4gIGh0dHAuc2VuZChudWxsKTtcbn1cblxuLyoqXG4gKiAg0LLQvtC30LLRgNCw0YnQsNC10YIgY29va2llINGBINC40LzQtdC90LXQvCBuYW1lLCDQtdGB0LvQuCDQtdGB0YLRjCwg0LXRgdC70Lgg0L3QtdGCLCDRgtC+IHVuZGVmaW5lZFxuICovXG5mdW5jdGlvbiBnZXRDb29raWUobmFtZSkge1xuICB2YXIgbWF0Y2hlcyA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKFxuICAgIFwiKD86Xnw7IClcIiArIG5hbWUucmVwbGFjZSgvKFtcXC4kPyp8e31cXChcXClcXFtcXF1cXFxcXFwvXFwrXl0pL2csICdcXFxcJDEnKSArIFwiPShbXjtdKilcIlxuICApKTtcbiAgcmV0dXJuIG1hdGNoZXMgPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hlc1sxXSkgOiB1bmRlZmluZWQ7XG59XG4iLCJ2YXIgYnJlYWtwb2ludCA9IHtcbiAgICAnc21hbGwnOiA3NjcsXG4gICAgJ21lZGl1bSc6IDk5MixcbiAgICAnbGFyZ2UnOiAxMjAwXG59O1xuXG5mdW5jdGlvbiByZXNwb25kVG8oYnJlYWtwb2ludCwgY2FsbGJhY2ssIHJ1bldoZW5DYWxsZWQsIGFkZEV2ZW50KSB7XG4gICAgaWYgKGJyZWFrcG9pbnQgPj0gd2luZG93LmlubmVyV2lkdGgpIHtcbiAgICAgICAgdmFyIGFjdGl2ZSA9IHRydWU7XG4gICAgICAgIGlmIChydW5XaGVuQ2FsbGVkKSB7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChhZGRFdmVudCkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9wdGltaXplZFJlc2l6ZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoYnJlYWtwb2ludCA+PSB3aW5kb3cuaW5uZXJXaWR0aCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChicmVha3BvaW50IDw9IHdpbmRvdy5pbm5lcldpZHRoKSBhY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZXNwb25kRnJvbShicmVha3BvaW50LCBjYWxsYmFjaywgcnVuV2hlbkNhbGxlZCwgYWRkRXZlbnQpIHtcbiAgICBpZiAoYnJlYWtwb2ludCA8PSB3aW5kb3cuaW5uZXJXaWR0aCkge1xuICAgICAgICB2YXIgYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgaWYgKHJ1bldoZW5DYWxsZWQpIHtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYWN0aXZlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGFkZEV2ZW50KSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3B0aW1pemVkUmVzaXplXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCFhY3RpdmUpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChicmVha3BvaW50IDw9IHdpbmRvdy5pbm5lcldpZHRoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJyZWFrcG9pbnQgPj0gd2luZG93LmlubmVyV2lkdGgpIGFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iXX0=
