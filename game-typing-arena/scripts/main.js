"use strict";function funText(t,a){var n=t.innerText;t.innerHTML="",n.split("").map(function(n,e){var i=document.createElement("span");n=" "===n?"&nbsp;":n,i.innerHTML=n,i.className=a,i.style.display="inline-block",i.style.animationDelay=100*e+"ms",t.appendChild(i)})}
"use strict";function AI(o){setInterval(function(){for(var a in gameObjects)if(gameObjects[a]!==o){var t=gameObjects[a].state.positionX-o.state.positionX;if(Math.abs(t)<=200)if(0===Math.round(Math.random()))r(0);else{var e=Math.floor(3*Math.random()+1);r(e)}else{var n=Math.floor(3*Math.random()+1);r(n)}}},1e3);var r=function(a){switch(a){case 0:o.runAction("hit");break;case 1:o.runAction("move",1);break;case 2:o.runAction("move",-1);break;case 3:o.runAction("jump")}}}
"use strict";function Hero(s){var o=this,n=[],a=s.querySelector(".hero__direction"),i=s.querySelector(".ui"),c=document.createElement("div");c.className="hero__health",s.appendChild(c),this.state={action:!1,nextAction:!1,health:100,damage:0,pose:null,direction:1,directionY:1,positionX:0,positionY:0,speedX:0,boostX:0,speedY:0,boostY:0},this.setPose=function(t){return o.state.pose&&requestAnimationFrame(function(){s.classList.remove("hero_"+o.state.pose)}),t&&(o.state.pose=t,requestAnimationFrame(function(){s.classList.add("hero_"+t)})),o},this.unsetPose=function(t){return o.state.pose=null,requestAnimationFrame(function(){s.classList.remove("hero_"+t)}),o},this.setSkin=function(t){return s.classList.remove("hero_"+o.state.skin),(o.state.skin=t)&&s.classList.add("hero_"+t),o},this.runAction=function(t,e){if(o.state.health<=0)return o;if(1!==e&&-1!==e||e!==o.state.direction&&(o.state.direction=e,o.state.speedX=0),-1!==n.indexOf(t))return o.state.nextAction=[t,e],o;var s=!!r[t]&&r[t];if(!s)return o;n.push(t);var a=0;return s.map(function(t){setTimeout(t.action,a),a+=t.duration?t.duration:0}),setTimeout(function(){n.splice(n.indexOf(t,1)),o.state.nextAction&&(o.runAction(o.state.nextAction[0],o.state.nextAction[1]),o.state.nextAction=!1)},a),o};var r={jump:[{name:"jump-start",duration:1500,action:function(){0<!o.state.positionY&&(o.state.speedY=60,o.state.boostX=40)}}],down:[{name:"down-start",duration:500,action:function(){o.setPose("down")}},{name:"down-end",action:function(){o.unsetPose("down")}}],move:[{name:"Step1",duration:300,action:function(){o.state.boostX=35,o.state.pose||o.setPose("step-1")}},{name:"Step2",duration:300,action:function(){o.unsetPose("step-1"),o.state.pose||o.setPose("step-2")}},{name:"stop",action:function(){o.unsetPose("step-2")}}],damage:[{name:"takeDamageStart",duration:300,action:function(){o.setPose("damage")}},{name:"takeDamageEnd",action:function(){o.unsetPose("damage")}}],hit:[{name:"hit1",duration:300,action:function(){o.setPose("hit-1")}},{name:"hit2",duration:300,action:function(){o.unsetPose("hit-1"),o.setPose("hit-2");var t=!1;for(var e in gameObjects)if(gameObjects[e]!==o){var s=gameObjects[e].state.positionX-o.state.positionX,a=gameObjects[e].state.positionY-o.state.positionY;Math.abs(s)<=200&&Math.abs(a)<100&&(t||(0<s?(o.state.direction=1,gameObjects[e].state.direction=-1):(o.state.direction=-1,gameObjects[e].state.direction=1),t=!0),o.state.direction+gameObjects[e].state.direction===0&&0<s*o.state.direction&&(gameObjects[e].state.speedX=-50,gameObjects[e].state.damage+=10))}}},{name:"hitEnd",action:function(){o.unsetPose("hit-2")}}]};return animationsLoop.push(function(){var t=physics(o.state.positionX,o.state.boostX,o.state.speedX,o.state.direction,arena.xMax,arena.xMin);0<o.state.damage&&(o.state.health-=o.state.damage,o.state.damage=0,o.runAction("damage")),o.state.health<=0?(o.state.health=0,c.style.color="#222",o.setPose("dead"),i.style.display="none",o.state.health<=0&&setTimeout(function(){return window.location.reload()},5e3)):0<o.state.health&&o.state.health<=30?c.style.color="#f00":30<o.state.health&&o.state.health<=60?c.style.color="#ff0":60<o.state.health&&(c.style.color="#0f0"),o.state.positionX=t.position,o.state.boostX=t.boost,o.state.speedX=t.speed,o.state.direction=t.direction;var e=physics(o.state.positionY,o.state.boostY,o.state.speedY,o.state.directionY,arena.yMax,arena.yMin);o.state.positionY=e.position,o.state.boostY=e.boost,o.state.speedY=e.speed,o.state.directionY=e.direction,0===o.state.speedY&&0<o.state.positionY&&(o.state.directionY=-1),-1===o.state.directionY&&(o.state.speedY+=3),o.state.positionY<=0&&o.state.speedY<80&&(o.state.boostY=0,o.state.speedY=0,o.state.positionY=0,o.state.directionY=1,"jump"===o.state.pose&&(o.setPose("landed"),setTimeout(function(){o.unsetPose("landed"),o.unsetPose("jump")},300))),0<o.state.speedY?o.state.pose||o.setPose("jump"):o.unsetPose("jump"),s.style.transform="translate(".concat(o.state.positionX,"%, ").concat(-o.state.positionY,"%)"),a.style.transform="scaleX(".concat(o.state.direction,")"),c.innerText=o.state.health}),this}
"use strict";function physics(s,t,a,i,b,h){return a=Math.abs(a)<1?0:a,0<(t=t<=0?0:t)?(t-=1+Math.abs(t)/100,a+=1+Math.abs(t)/100):0!==a&&0<a?a-=1+Math.abs(a)/100:0!==a&&a<0&&(a+=1+Math.abs(a)/100),b<(s+=a/10*i)?i=0<a?-1:1:s<h&&(i=0<a?1:-1),{position:s,boost:t,speed:a,direction:i}}
"use strict";function Ui(){var o=this,n=0,i=-1;this.elements=[],this.makePhrase=function(e){for(var i="",l="abcdefghijklmnopqrstuvwxyz",m=l.length,t=function(t){var s=l.charAt(Math.floor(Math.random()*m)),n=!1;0===t&&o.elements.map(function(e){e.symbols[0]===s&&(t=-1,n=!0)}),n||(i+=s),a=t},a=0;a<e;a++)t(a);return i};for(var t,e=document.querySelectorAll(".ui__element"),s=0;s<e.length;s++){this.elements[s]=new m(e[s]);var l=4;config.lengthPhrasesForActions[this.elements[s].action]&&(l=config.lengthPhrasesForActions[this.elements[s].action]),this.elements[s].setText(this.makePhrase(l))}function m(e){var i=this;return this.elem=e,this.text="",this.action=e.dataset.action,this.direction=e.dataset.direction,this.icon=e.dataset.icon,this.symbols=[],this.elemSymbols=[],this.elemText=document.createElement("div"),this.elemText.classList.add("ui__text"),this.elem.appendChild(this.elemText),this.elemUiIcon=document.createElement("div"),this.elemUiIcon.classList.add("ui__icon"),this.elem.appendChild(this.elemUiIcon),this.elemIcon=document.createElement("div"),this.elemIcon.classList.add("icon"),this.elemIcon.classList.add("icon_"+this.icon),this.elemUiIcon.appendChild(this.elemIcon),this.setText=function(e){i.text=e,i.elemText.innerHTML="";var n="fadeIn";i.text.split("").map(function(e,t){var s=document.createElement("span");e=" "===e?"&nbsp;":e,i.symbols[t]=e,s.innerHTML=e,s.className="ui__symbol "+n,s.style.display="inline-block",s.style.animationDelay=100*t+"ms",i.elemSymbols[t]=s,i.elemText.appendChild(s),setTimeout(function(){s.classList.remove(n)},100*(t+1))})},this}this.found=function(s){var e=!1;return clearTimeout(t),t=setTimeout(function(){o.found(!1)},1200),i<0?(o.elements.map(function(e,t){e.symbols[n]===s?(e.elemSymbols[n].classList.add("fadeOutDown"),e.elemText.style.transform="scale(1.5)",i=t,performance.now()):e.elem.style.display="none"}),n++):o.elements[i].symbols[n]===s?(o.elements[i].elemSymbols[n].classList.remove("fadeIn"),o.elements[i].elemSymbols[n].classList.add("fadeOutDown"),n++):(o.elements[i].setText(o.makePhrase(o.elements[i].text.length)),i=-1,n=0),0<=i&&o.elements[i].symbols.length===n?(o.elements[i].setText(o.makePhrase(o.elements[i].text.length)),gameObjects.player.runAction(o.elements[i].action,+o.elements[i].direction),i=-1,e=!(n=0)):0<=i&&o.elements[i].elemSymbols[n].classList.add("ui__symbol_selected"),i<0&&(o.elements.map(function(e){e.elem.style.display="",e.elemText.style.transform=""}),i=-1,n=0,!!e)}}
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var activeDrawsList=[],showFrameRate=!1;function animate(t){var i="number"==typeof(t="object"==_typeof(t)?t:{}).duration?t.duration:1e3,e="number"==typeof t.delay?t.delay:0,n="number"==typeof t.from?t.from:1,o="number"==typeof t.to?t.to:100,f="function"==typeof t.timing?t.timing:linear,c="function"==typeof t.draw?t.draw:function(t){console.log(100*t)},s="function"==typeof t.before?t.before:function(){},m="function"==typeof t.after?t.after:function(){},p=n/100,y=o/100;setTimeout(function(){for(var a=performance.now(),u=a,t=activeDrawsList.length-1;0<=t;t--)if(activeDrawsList[t]===c)return!1;activeDrawsList.push(c);requestAnimationFrame(function t(e){s&&(s(),s=!1);var n=(e-a)/i;if(1<n&&(n=1),p<y)var o=(n+=p)<y;else o=y<(n=-(n-p));var r=f(n);c(r),o?(requestAnimationFrame(t),showFrameRate&&(console.log(frameRate(u,e),Math.round(100*n)),u=e)):(activeDrawsList.splice(activeDrawsList.indexOf(c),1),m&&m())})},e)}function frameRate(t,e){return Math.round(1e3/(e-t))}function zone(t,e,n,o){if(n*=100,o*=100,(e*=100)<=(t*=100)&&t<=n){var r=(t-e)/(n-e);return o&&o(r),r}return t<=e?0:n<=t?1:void 0}function makeEaseOut(e){return function(t){return 1-e(1-t)}}function makeEaseInOut(e){return function(t){return t<.5?e(2*t)/2:(2-e(2*(1-t)))/2}}function linear(t){return t}function quad(t){return Math.pow(t,2)}var quadEaseOut=makeEaseOut(quad);function circ(t){return 1-Math.sin(Math.acos(t))}var circEaseOut=makeEaseOut(circ);function back(t,e){return Math.pow(e,2)*((t+1)*e-t)}var backEaseOut=makeEaseOut(back);function bounce(t){for(var e=0,n=1;;e+=n,n/=2)if((7-4*e)/11<=t)return-Math.pow((11-6*e-11*t)/4,2)+Math.pow(n,2)}var bounceEaseOut=makeEaseOut(bounce);function elastic(t,e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}var elasticEaseOut=makeEaseOut(elastic);
"use strict";function ready(e){document.addEventListener("DOMContentLoaded",e)}function addEvent(e,t,n){null!=e&&void 0!==e&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n)}function compareRandom(e,t){return Math.random()-.5}function getDocument(e,t){var n=new XMLHttpRequest;n.open("GET",e),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=(new DOMParser).parseFromString(this.responseText,"text/html");t(e)}},n.send(null)}function getCookie(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}!function(e,t,n){n=n||window;var o=!1;n.addEventListener(e,function(){o||(o=!0,requestAnimationFrame(function(){n.dispatchEvent(new CustomEvent(t)),o=!1}))})}("resize","optimizedResize");
"use strict";var breakpoint={small:767,medium:992,large:1200};function respondTo(i,n,e,t){if(i>=window.innerWidth){var r=!0;e&&requestAnimationFrame(n)}else r=!1;t&&window.addEventListener("optimizedResize",function(){if(!r&&(r=!0,i>=window.innerWidth))return setTimeout(function(){requestAnimationFrame(n)},100),!0;i<=window.innerWidth&&(r=!1)})}function respondFrom(i,n,e,t){if(i<=window.innerWidth){var r=!0;e&&requestAnimationFrame(n)}else r=!1;t&&window.addEventListener("optimizedResize",function(){if(!r&&(r=!0,i<=window.innerWidth))return setTimeout(function(){requestAnimationFrame(n)},100),!0;i>=window.innerWidth&&(r=!1)})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGlvbnMvZnVuVGV4dC5qcyIsImNvbXBvbmVudHMvYWkuanMiLCJjb21wb25lbnRzL2hlcm8uanMiLCJjb21wb25lbnRzL3BoeXNpY3MuanMiLCJjb21wb25lbnRzL3VpLmpzIiwiaGVscGVycy9hbmltYXRlLmpzIiwiaGVscGVycy9vdGhlcnMuanMiLCJoZWxwZXJzL3Jlc3BvbmQuanMiXSwibmFtZXMiOlsiZnVuVGV4dCIsImVsZW1UZXh0IiwiYW5pbWF0ZUNsYXNzIiwidGV4dCIsImlubmVyVGV4dCIsImlubmVySFRNTCIsInN5bWJvbCIsImluZGV4Iiwic3BsaXQiLCJzcGFuIiwibWFwIiwiY3JlYXRlRWxlbWVudCIsImRvY3VtZW50IiwiY2xhc3NOYW1lIiwiZGlzcGxheSIsInN0eWxlIiwiYW5pbWF0aW9uRGVsYXkiLCJBSSIsImhlcm8iLCJzZXRJbnRlcnZhbCIsImtleSIsImdhbWVPYmplY3RzIiwiZGlzdGFuY2UiLCJzdGF0ZSIsInBvc2l0aW9uWCIsImFicyIsInN3aXRjaEFjdGlvbiIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImFjdGlvbkluZGV4IiwicnVuQWN0aW9uIiwiSGVybyIsImVsZW1IZXJvIiwiX3RoaXMiLCJ0aGlzIiwiYWN0aXZlQWN0aW9ucyIsInF1ZXJ5U2VsZWN0b3IiLCJlbGVtVWkiLCJlbGVtRGlyZWN0aW9uIiwiZWxlbVVpSGVhbHRoIiwiYXBwZW5kQ2hpbGQiLCJhY3Rpb24iLCJuZXh0QWN0aW9uIiwiaGVhbHRoIiwiZGFtYWdlIiwiZGlyZWN0aW9uIiwiZGlyZWN0aW9uWSIsInBvc2l0aW9uWSIsInNwZWVkWCIsImJvb3N0WCIsInNwZWVkWSIsInNldFBvc2UiLCJwb3NlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicmVtb3ZlIiwiYWRkIiwidW5zZXRQb3NlIiwiY2xhc3NMaXN0Iiwic2V0U2tpbiIsInNraW4iLCJhY3Rpb25OYW1lIiwiaW5kZXhPZiIsImFjdGlvbnMiLCJwdXNoIiwiZGVsYXkiLCJhY3Rpb25TdGVwIiwic2V0VGltZW91dCIsImR1cmF0aW9uIiwic3BsaWNlIiwianVtcCIsIm5hbWUiLCJoaXQiLCJjaGFuZ2VkRGlyZWN0aW9uIiwiZGlzdGFuY2VZIiwiYW5pbWF0aW9uc0xvb3AiLCJuZXh0UG9zaXRpb25zWCIsInBoeXNpY3MiLCJhcmVuYSIsIndpbmRvdyIsInhNaW4iLCJjb2xvciIsIm5leHRQb3NpdGlvbnNZIiwiYm9vc3RZIiwiYm9vc3QiLCJwb3NpdGlvbiIsInNwZWVkIiwidHJhbnNmb3JtIiwiY29uY2F0IiwicG9zTWF4IiwicG9zTWluIiwiVWkiLCJjaGFyQ291bnRlciIsImZvdW5kIiwiZWxlbWVudHMiLCJsZW5ndGgiLCJjaGFyYWN0ZXJzIiwiY2hhcmFjdGVyc0xlbmd0aCIsIl9sb29wIiwiX2kiLCJjaGFyQXQiLCJza2lwIiwiaSIsIm5ld0NoYXIiLCJlbGVtZW50Iiwic3ltYm9scyIsInJlc3VsdCIsImVsZW1zIiwicXVlcnlTZWxlY3RvckFsbCIsIlVpRWxlbWVudCIsImNvbmZpZyIsImxlbmd0aFBocmFzZXNGb3JBY3Rpb25zIiwic2V0VGV4dCIsIm1ha2VQaHJhc2UiLCJlbGVtIiwiX3RoaXMyIiwiZGF0YXNldCIsInVpRWxlbWVudCIsImVsZW1TeW1ib2xzIiwiYWN0aW9uUGxheWVkIiwiZWxlbVVpSWNvbiIsImVsZW1JY29uIiwiaWNvbiIsImZhZGVDbGFzcyIsImNsZWFyVGltZW91dCIsInRpbWVyRm91bmQiLCJwZXJmb3JtYW5jZSIsIm5vdyIsInRpbWVTdGFydCIsInBsYXllciIsImFjdGl2ZURyYXdzTGlzdCIsInNob3dGcmFtZVJhdGUiLCJhbmltYXRlIiwib3B0aW9ucyIsIl90eXBlb2YiLCJmcm9tIiwidG8iLCJsaW5lYXIiLCJkcmF3IiwicHJvZ3Jlc3MiLCJjb25zb2xlIiwibG9nIiwiYmVmb3JlIiwiYWZ0ZXIiLCJzdGFydCIsImZyYWN0aW9uRnJvbSIsInRpbWUiLCJhbmltYXRpb25JbmRleCIsInRpbWVGcmFjdGlvbiIsImZyYWN0aW9uVG8iLCJ0aW1pbmciLCJ0ZXJtaW5hdGlvbkNvbmRpdGlvbiIsImZyYW1lUmF0ZSIsInRpbWVMYXN0Iiwicm91bmQiLCJ0aW1lTm93IiwiY3VycmVudCIsIm1ha2VFYXNlT3V0IiwibWFrZUVhc2VJbk91dCIsInF1YWQiLCJxdWFkRWFzZU91dCIsInNpbiIsImFjb3MiLCJjaXJjRWFzZU91dCIsImJhY2siLCJ4IiwicG93IiwiYmFja0Vhc2VPdXQiLCJib3VuY2UiLCJhIiwiYiIsImJvdW5jZUVhc2VPdXQiLCJlbGFzdGljIiwiY29zIiwiUEkiLCJyZWFkeSIsImxpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50Iiwib2JqZWN0IiwidHlwZSIsImF0dGFjaEV2ZW50IiwiY29tcGFyZVJhbmRvbSIsImdldERvY3VtZW50IiwidXJsIiwiY2FsbGJhY2siLCJodHRwIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsImRvYyIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsInJlc3BvbnNlVGV4dCIsInNlbmQiLCJnZXRDb29raWUiLCJtYXRjaGVzIiwicmVwbGFjZSIsImRlY29kZVVSSUNvbXBvbmVudCIsInVuZGVmaW5lZCIsIm9iaiIsInJ1bm5pbmciLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJicmVha3BvaW50Iiwic21hbGwiLCJsYXJnZSIsInJlc3BvbmRUbyIsInJ1bldoZW5DYWxsZWQiLCJpbm5lcldpZHRoIiwiYWN0aXZlIiwicmVzcG9uZEZyb20iXSwibWFwcGluZ3MiOiJhQUFBLFNBQVNBLFFBQVFDLEVBQVVDLEdBQ3ZCLElBQUlDLEVBQU9GLEVBQVNHLFVBRHhCSCxFQUFTRCxVQUFULEdBRUlDLEVBQUFBLE1BQVNJLElBQUFBLElBQVksU0FBQUMsRUFBckJDLEdBRUtDLElBQUxDLEVBQWVDLFNBQUlDLGNBQVNKLFFBQ3BCRSxFQUFnQkUsTUFBVEMsRUFBU0QsU0FBcEJMLEVBQ0FBLEVB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QSxLQUlYLFNBWkRDLFlBQUFQLEVBQUFyQixFQUFBeUIsRUFBQWhDLEdBYUgsR0FBQTRCLEdBQUEvSCxPQUFBb0ksV0FBQSxDQUNKLElBQUFDLEdBQUEsRUFLV0YsR0FISEcsc0JBQXdCNUIsUUFPckIyQixHQUFTLEVBRlpsQyxHQUpMbkcsT0FLT2tHLGlCQUFBLGtCQUFBLFdBQ0NtQyxJQUFTQSxJQUNoQkEsR0FBQSxFQU1lTixHQUFjL0gsT0FBT29JLFlBS3JCLE9BUkxsQyxXQUFpQixXQUNQM0gsc0JBQUFtSSxJQUNULE1BTVcsRUFGSG5JLEdBQUFBLE9BQXNCbUksYUFBdEIyQixHQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBmdW5UZXh0KGVsZW1UZXh0LCBhbmltYXRlQ2xhc3MpIHtcbiAgICBsZXQgdGV4dCA9IGVsZW1UZXh0LmlubmVyVGV4dDtcbiAgICBlbGVtVGV4dC5pbm5lckhUTUwgPSAnJztcblxuICAgIHRleHQuc3BsaXQoJycpLm1hcCgoc3ltYm9sLCBpbmRleCkgPT4ge1xuICAgICAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgc3ltYm9sID0gc3ltYm9sID09PSAnICcgPyAnJm5ic3A7JyA6IHN5bWJvbDtcbiAgICAgICAgc3Bhbi5pbm5lckhUTUwgPSBzeW1ib2w7XG4gICAgICAgIHNwYW4uY2xhc3NOYW1lID0gYW5pbWF0ZUNsYXNzO1xuICAgICAgICBzcGFuLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICAgICAgc3Bhbi5zdHlsZS5hbmltYXRpb25EZWxheSA9IGluZGV4ICogMTAwICsgJ21zJztcbiAgICAgICAgZWxlbVRleHQuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgfSk7XG59IiwiZnVuY3Rpb24gQUkoaGVybykge1xuICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBnYW1lT2JqZWN0cykge1xuICAgICAgICAgICAgaWYgKGdhbWVPYmplY3RzW2tleV0gIT09IGhlcm8pIHtcbiAgICAgICAgICAgICAgICBsZXQgZGlzdGFuY2UgPSBnYW1lT2JqZWN0c1trZXldLnN0YXRlLnBvc2l0aW9uWCAtIGhlcm8uc3RhdGUucG9zaXRpb25YO1xuXG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRpc3RhbmNlKSA8PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaEFjdGlvbigwKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhY3Rpb25JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaEFjdGlvbihhY3Rpb25JbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aW9uSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaEFjdGlvbihhY3Rpb25JbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwgMTAwMCk7XG5cblxuICAgIGNvbnN0IHN3aXRjaEFjdGlvbiA9IChpbmRleCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGluZGV4KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgaGVyby5ydW5BY3Rpb24oJ2hpdCcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIGhlcm8ucnVuQWN0aW9uKCdtb3ZlJywgMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgaGVyby5ydW5BY3Rpb24oJ21vdmUnLCAtMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgaGVyby5ydW5BY3Rpb24oJ2p1bXAnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn0iLCJmdW5jdGlvbiBIZXJvKGVsZW1IZXJvKSB7XG4gICAgY29uc3QgYWN0aXZlQWN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IGVsZW1EaXJlY3Rpb24gPSBlbGVtSGVyby5xdWVyeVNlbGVjdG9yKCcuaGVyb19fZGlyZWN0aW9uJyk7XG4gICAgY29uc3QgZWxlbVVpID0gZWxlbUhlcm8ucXVlcnlTZWxlY3RvcignLnVpJyk7XG5cblxuICAgIGNvbnN0IGVsZW1VaUhlYWx0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGVsZW1VaUhlYWx0aC5jbGFzc05hbWUgPSAnaGVyb19faGVhbHRoJztcbiAgICBlbGVtSGVyby5hcHBlbmRDaGlsZChlbGVtVWlIZWFsdGgpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgYWN0aW9uOiBmYWxzZSxcbiAgICAgICAgbmV4dEFjdGlvbjogZmFsc2UsXG4gICAgICAgIGhlYWx0aDogMTAwLFxuICAgICAgICBkYW1hZ2U6IDAsXG4gICAgICAgIHBvc2U6IG51bGwsXG4gICAgICAgIGRpcmVjdGlvbjogMSxcbiAgICAgICAgZGlyZWN0aW9uWTogMSxcbiAgICAgICAgcG9zaXRpb25YOiAwLFxuICAgICAgICBwb3NpdGlvblk6IDAsXG4gICAgICAgIHNwZWVkWDogMCxcbiAgICAgICAgYm9vc3RYOiAwLFxuICAgICAgICBzcGVlZFk6IDAsXG4gICAgICAgIGJvb3N0WTogMFxuICAgIH07XG5cbiAgICB0aGlzLnNldFBvc2UgPSAocG9zZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5wb3NlKSB7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGVsZW1IZXJvLmNsYXNzTGlzdC5yZW1vdmUoJ2hlcm9fJyArIHRoaXMuc3RhdGUucG9zZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3NlKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnBvc2UgPSBwb3NlO1xuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICBlbGVtSGVyby5jbGFzc0xpc3QuYWRkKCdoZXJvXycgKyBwb3NlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIHRoaXMudW5zZXRQb3NlID0gKHBvc2UpID0+IHtcbiAgICAgICAgdGhpcy5zdGF0ZS5wb3NlID0gbnVsbDtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICBlbGVtSGVyby5jbGFzc0xpc3QucmVtb3ZlKCdoZXJvXycgKyBwb3NlKTtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiDQktC+0LfQvNC+0LbQvdC+INC90YPQttC90L4g0LHRg9C00LXRgiDQstC+0LfQstGA0LDRidCw0YLRjCDQv9GA0LXQtNGL0LTRg9GJ0YPRjiDQv9C+0LfRg1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0U2tpbiA9IChza2luKSA9PiB7XG4gICAgICAgIGVsZW1IZXJvLmNsYXNzTGlzdC5yZW1vdmUoJ2hlcm9fJyArIHRoaXMuc3RhdGUuc2tpbik7XG4gICAgICAgIHRoaXMuc3RhdGUuc2tpbiA9IHNraW47XG4gICAgICAgIGlmIChza2luKSB7XG4gICAgICAgICAgICBlbGVtSGVyby5jbGFzc0xpc3QuYWRkKCdoZXJvXycgKyBza2luKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgdGhpcy5ydW5BY3Rpb24gPSAoYWN0aW9uTmFtZSwgZGlyZWN0aW9uKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmhlYWx0aCA8PSAwKSByZXR1cm4gdGhpcztcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gMSB8fCBkaXJlY3Rpb24gPT09IC0xKSB7XG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uICE9PSB0aGlzLnN0YXRlLmRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc3BlZWRYID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhY3RpdmVBY3Rpb25zLmluZGV4T2YoIGFjdGlvbk5hbWUgKSAhPT0gLTEgKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLm5leHRBY3Rpb24gPSBbYWN0aW9uTmFtZSwgZGlyZWN0aW9uXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYWN0aW9uID0gYWN0aW9uc1thY3Rpb25OYW1lXSA/IGFjdGlvbnNbYWN0aW9uTmFtZV0gOiBmYWxzZTtcbiAgICAgICAgaWYgKCFhY3Rpb24pIHJldHVybiB0aGlzO1xuXG4gICAgICAgIGFjdGl2ZUFjdGlvbnMucHVzaChhY3Rpb25OYW1lKTtcblxuICAgICAgICBsZXQgZGVsYXkgPSAwO1xuICAgICAgICBhY3Rpb24ubWFwKChhY3Rpb25TdGVwLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgc2V0VGltZW91dChhY3Rpb25TdGVwLmFjdGlvbiwgZGVsYXkpO1xuICAgICAgICAgICAgZGVsYXkgKz0gYWN0aW9uU3RlcC5kdXJhdGlvbiA/IGFjdGlvblN0ZXAuZHVyYXRpb24gOiAwO1xuICAgICAgICB9KTtcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGFjdGl2ZUFjdGlvbnMuc3BsaWNlKGFjdGl2ZUFjdGlvbnMuaW5kZXhPZihhY3Rpb25OYW1lLCAxKSk7XG5cbiAgICAgICAgICAgIGlmKHRoaXMuc3RhdGUubmV4dEFjdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMucnVuQWN0aW9uKHRoaXMuc3RhdGUubmV4dEFjdGlvblswXSwgdGhpcy5zdGF0ZS5uZXh0QWN0aW9uWzFdKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLm5leHRBY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZGVsYXkpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBjb25zdCBhY3Rpb25zID0ge1xuICAgICAgICAnanVtcCc6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnanVtcC1zdGFydCcsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDE1MDAsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zdGF0ZS5wb3NpdGlvblkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnNwZWVkWSA9IDYwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5ib29zdFggPSA0MDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgJ2Rvd24nIDogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdkb3duLXN0YXJ0JyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFBvc2UoJ2Rvd24nKTs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnZG93bi1lbmQnLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc2V0UG9zZSgnZG93bicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgJ21vdmUnIDogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdTdGVwMScsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5ib29zdFggPSAzNTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXRlLnBvc2UpIHRoaXMuc2V0UG9zZSgnc3RlcC0xJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnU3RlcDInLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zZXRQb3NlKCdzdGVwLTEnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXRlLnBvc2UpIHRoaXMuc2V0UG9zZSgnc3RlcC0yJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnc3RvcCcsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zZXRQb3NlKCdzdGVwLTInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgICdkYW1hZ2UnIDogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICd0YWtlRGFtYWdlU3RhcnQnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9zZSgnZGFtYWdlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAndGFrZURhbWFnZUVuZCcsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zZXRQb3NlKCdkYW1hZ2UnKTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgJ2hpdCcgOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2hpdDEnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9zZSgnaGl0LTEnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdoaXQyJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc2V0UG9zZSgnaGl0LTEnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQb3NlKCdoaXQtMicpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY2hhbmdlZERpcmVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZ2FtZU9iamVjdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZU9iamVjdHNba2V5XSAhPT0gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlzdGFuY2UgPSAgZ2FtZU9iamVjdHNba2V5XS5zdGF0ZS5wb3NpdGlvblggLSB0aGlzLnN0YXRlLnBvc2l0aW9uWDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpc3RhbmNlWSA9IGdhbWVPYmplY3RzW2tleV0uc3RhdGUucG9zaXRpb25ZIC0gdGhpcy5zdGF0ZS5wb3NpdGlvblk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRpc3RhbmNlKSA8PSAyMDAgJiYgTWF0aC5hYnMoZGlzdGFuY2VZKSA8IDEwMCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNoYW5nZWREaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZGlyZWN0aW9uID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZU9iamVjdHNba2V5XS5zdGF0ZS5kaXJlY3Rpb24gPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmRpcmVjdGlvbiA9IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lT2JqZWN0c1trZXldLnN0YXRlLmRpcmVjdGlvbiA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWREaXJlY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5kaXJlY3Rpb24gKyBnYW1lT2JqZWN0c1trZXldLnN0YXRlLmRpcmVjdGlvbiA9PT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGRpc3RhbmNlICogdGhpcy5zdGF0ZS5kaXJlY3Rpb24gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZU9iamVjdHNba2V5XS5zdGF0ZS5zcGVlZFggPSAtNTA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZU9iamVjdHNba2V5XS5zdGF0ZS5kYW1hZ2UgKz0gMTA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2hpdEVuZCcsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zZXRQb3NlKCdoaXQtMicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgIH07XG5cbiAgICBhbmltYXRpb25zTG9vcC5wdXNoKCh0aW1lKSA9PiB7XG4gICAgICAgIGxldCBuZXh0UG9zaXRpb25zWCA9IHBoeXNpY3MoXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnBvc2l0aW9uWCxcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYm9vc3RYLFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zcGVlZFgsXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmRpcmVjdGlvbixcbiAgICAgICAgICAgIGFyZW5hLnhNYXgsXG4gICAgICAgICAgICBhcmVuYS54TWluKTtcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5kYW1hZ2UgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmhlYWx0aCAtPSB0aGlzLnN0YXRlLmRhbWFnZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZGFtYWdlID0gMDtcbiAgICAgICAgICAgIHRoaXMucnVuQWN0aW9uKCdkYW1hZ2UnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmhlYWx0aCA8PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmhlYWx0aCA9IDA7XG4gICAgICAgICAgICBlbGVtVWlIZWFsdGguc3R5bGUuY29sb3IgPSAnIzIyMic7XG4gICAgICAgICAgICB0aGlzLnNldFBvc2UoJ2RlYWQnKTtcbiAgICAgICAgICAgIGVsZW1VaS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5oZWFsdGggPD0gMCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpLCA1MDAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmhlYWx0aCA+IDAgJiYgdGhpcy5zdGF0ZS5oZWFsdGggPD0gMzApIHtcbiAgICAgICAgICAgIGVsZW1VaUhlYWx0aC5zdHlsZS5jb2xvciA9ICcjZjAwJztcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmhlYWx0aCA+IDMwICYmICB0aGlzLnN0YXRlLmhlYWx0aCA8PSA2MCkge1xuICAgICAgICAgICAgZWxlbVVpSGVhbHRoLnN0eWxlLmNvbG9yID0gJyNmZjAnO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuaGVhbHRoID4gNjApIHtcbiAgICAgICAgICAgIGVsZW1VaUhlYWx0aC5zdHlsZS5jb2xvciA9ICcjMGYwJztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RhdGUucG9zaXRpb25YID0gbmV4dFBvc2l0aW9uc1gucG9zaXRpb247XG4gICAgICAgIHRoaXMuc3RhdGUuYm9vc3RYID0gbmV4dFBvc2l0aW9uc1guYm9vc3Q7XG4gICAgICAgIHRoaXMuc3RhdGUuc3BlZWRYID0gbmV4dFBvc2l0aW9uc1guc3BlZWQ7XG4gICAgICAgIHRoaXMuc3RhdGUuZGlyZWN0aW9uID0gbmV4dFBvc2l0aW9uc1guZGlyZWN0aW9uO1xuXG4gICAgICAgIGxldCBuZXh0UG9zaXRpb25zWSA9IHBoeXNpY3MoXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnBvc2l0aW9uWSxcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYm9vc3RZLFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zcGVlZFksXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmRpcmVjdGlvblksXG4gICAgICAgICAgICBhcmVuYS55TWF4LFxuICAgICAgICAgICAgYXJlbmEueU1pbik7XG5cbiAgICAgICAgdGhpcy5zdGF0ZS5wb3NpdGlvblkgPSBuZXh0UG9zaXRpb25zWS5wb3NpdGlvbjtcbiAgICAgICAgdGhpcy5zdGF0ZS5ib29zdFkgPSBuZXh0UG9zaXRpb25zWS5ib29zdDtcbiAgICAgICAgdGhpcy5zdGF0ZS5zcGVlZFkgPSBuZXh0UG9zaXRpb25zWS5zcGVlZDtcbiAgICAgICAgdGhpcy5zdGF0ZS5kaXJlY3Rpb25ZID0gbmV4dFBvc2l0aW9uc1kuZGlyZWN0aW9uO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNwZWVkWSA9PT0gMCAmJiB0aGlzLnN0YXRlLnBvc2l0aW9uWSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZGlyZWN0aW9uWSA9IC0xO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZGlyZWN0aW9uWSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuc3BlZWRZICs9IDM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5wb3NpdGlvblkgPD0gMCAmJiB0aGlzLnN0YXRlLnNwZWVkWSA8IDgwKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmJvb3N0WSA9IDA7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNwZWVkWSA9IDA7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnBvc2l0aW9uWSA9IDA7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmRpcmVjdGlvblkgPSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUucG9zZSA9PT0gJ2p1bXAnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQb3NlKCdsYW5kZWQnKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnNldFBvc2UoJ2xhbmRlZCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc2V0UG9zZSgnanVtcCcpO1xuICAgICAgICAgICAgICAgIH0sMzAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNwZWVkWSA+IDApIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zdGF0ZS5wb3NlKSB0aGlzLnNldFBvc2UoJ2p1bXAnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5zZXRQb3NlKCdqdW1wJyk7XG4gICAgICAgIH1cblxuICAgICAgICBlbGVtSGVyby5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7dGhpcy5zdGF0ZS5wb3NpdGlvblh9JSwgJHstdGhpcy5zdGF0ZS5wb3NpdGlvbll9JSlgO1xuICAgICAgICBlbGVtRGlyZWN0aW9uLnN0eWxlLnRyYW5zZm9ybSA9IGBzY2FsZVgoJHt0aGlzLnN0YXRlLmRpcmVjdGlvbn0pYDtcbiAgICAgICAgZWxlbVVpSGVhbHRoLmlubmVyVGV4dCA9IHRoaXMuc3RhdGUuaGVhbHRoO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG59XG4iLCJmdW5jdGlvbiBwaHlzaWNzKHBvc2l0aW9uLCBib29zdCwgc3BlZWQsIGRpcmVjdGlvbiwgcG9zTWF4LCBwb3NNaW4pIHtcbiAgICBzcGVlZCA9IE1hdGguYWJzKHNwZWVkKSA8IDEgPyAwIDogc3BlZWQ7XG4gICAgYm9vc3QgPSBib29zdCA8PSAwID8gMCA6IGJvb3N0O1xuXG4gICAgaWYgKGJvb3N0ID4gMCkge1xuICAgICAgICBib29zdCAtPSAxICsgKE1hdGguYWJzKGJvb3N0KSAvIDEwMCk7XG4gICAgICAgIHNwZWVkICs9IDEgKyAoTWF0aC5hYnMoYm9vc3QpIC8gMTAwKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc3BlZWQgIT09IDAgJiYgc3BlZWQgPiAwKSB7XG4gICAgICAgIHNwZWVkIC09IDEgKyAoTWF0aC5hYnMoc3BlZWQpIC8gMTAwKTtcbiAgICB9IGVsc2UgaWYgKHNwZWVkICE9PSAwICYmIHNwZWVkIDwgMCkge1xuICAgICAgICBzcGVlZCArPSAxICsgKE1hdGguYWJzKHNwZWVkKSAvIDEwMCk7XG4gICAgfVxuXG4gICAgcG9zaXRpb24gPSBwb3NpdGlvbiArIHNwZWVkIC8gMTAgKiBkaXJlY3Rpb247XG5cbiAgICBpZiAocG9zaXRpb24gPiBwb3NNYXgpIHtcbiAgICAgICAgZGlyZWN0aW9uID0gc3BlZWQgPiAwID8gLTEgOiAxO1xuICAgIH0gZWxzZSBpZiAocG9zaXRpb24gPCBwb3NNaW4pIHtcbiAgICAgICAgZGlyZWN0aW9uID0gc3BlZWQgPiAwID8gMSA6IC0xO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbixcbiAgICAgICAgYm9vc3QgOiBib29zdCxcbiAgICAgICAgc3BlZWQgOiBzcGVlZCxcbiAgICAgICAgZGlyZWN0aW9uIDogZGlyZWN0aW9uXG4gICAgfVxufTtcbiIsImZ1bmN0aW9uIFVpICgpIHtcbiAgICBsZXQgY2hhckNvdW50ZXIgPSAwO1xuICAgIGxldCBmb3VuZCA9IC0xO1xuXG4gICAgdGhpcy5lbGVtZW50cyA9IFtdO1xuXG4gICAgdGhpcy5tYWtlUGhyYXNlID0gKGxlbmd0aCkgPT4ge1xuICAgICAgICBsZXQgcmVzdWx0ICAgICAgICAgICA9ICcnO1xuICAgICAgICBsZXQgY2hhcmFjdGVycyAgICAgICA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eic7XG4gICAgICAgIC8vIGNoYXJhY3RlcnMgICAgICAgICAgKz0gJ9Cw0LHQstCz0LTQtdC20LfQuNC50LrQu9C80L3QvtC/0YDRgdGC0YPRhNGF0YbRh9GI0YnRitGL0YzRjdGO0Y8nO1xuICAgICAgICAvLyBjaGFyYWN0ZXJzICAgICAgICAgICs9ICcwMTIzNDU2Nzg5JztcbiAgICAgICAgLy8gY2hhcmFjdGVycyAgICAgICAgICArPSAnIUAjJCVeJiooKV8rW117fVxcfDs6XFwnXCI8PiwuPy8nO1xuXG4gICAgICAgIGxldCBjaGFyYWN0ZXJzTGVuZ3RoICAgICA9IGNoYXJhY3RlcnMubGVuZ3RoO1xuICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKyApIHtcbiAgICAgICAgICAgIGxldCBuZXdDaGFyID0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpO1xuICAgICAgICAgICAgbGV0IHNraXAgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5tYXAoKGVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnN5bWJvbHNbMF0gPT09IG5ld0NoYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraXAgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXNraXApIHJlc3VsdCArPSBuZXdDaGFyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIGxldCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy51aV9fZWxlbWVudCcpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG5ldyBVaUVsZW1lbnQoZWxlbXNbaV0pO1xuICAgICAgICBsZXQgbGVuZ3RoID0gNDtcbiAgICAgICAgaWYgKGNvbmZpZy5sZW5ndGhQaHJhc2VzRm9yQWN0aW9uc1t0aGlzLmVsZW1lbnRzW2ldLmFjdGlvbl0pIHtcbiAgICAgICAgICAgIGxlbmd0aCA9IGNvbmZpZy5sZW5ndGhQaHJhc2VzRm9yQWN0aW9uc1t0aGlzLmVsZW1lbnRzW2ldLmFjdGlvbl07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbGVtZW50c1tpXS5zZXRUZXh0KHRoaXMubWFrZVBocmFzZShsZW5ndGgpKTtcbiAgICB9XG5cbiAgICBsZXQgdGltZVN0YXJ0O1xuICAgIGxldCB0aW1lckZvdW5kO1xuXG4gICAgdGhpcy5mb3VuZCA9IChrZXkpID0+IHtcbiAgICAgICAgbGV0IGFjdGlvblBsYXllZCA9IGZhbHNlO1xuXG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lckZvdW5kKTtcbiAgICAgICAgdGltZXJGb3VuZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mb3VuZChmYWxzZSk7XG4gICAgICAgIH0sIDEyMDApO1xuXG4gICAgICAgIGlmIChmb3VuZCA8IDApIHtcbiAgICAgICAgICAgIC8vINCf0L7QuNGB0Log0L/QtdGA0LLQvtC5INC60LvQsNCy0LjRiNC4XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLm1hcCgodWlFbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh1aUVsZW1lbnQuc3ltYm9sc1tjaGFyQ291bnRlcl0gPT09IGtleSkge1xuICAgICAgICAgICAgICAgICAgICB1aUVsZW1lbnQuZWxlbVN5bWJvbHNbY2hhckNvdW50ZXJdLmNsYXNzTGlzdC5hZGQoJ2ZhZGVPdXREb3duJyk7XG4gICAgICAgICAgICAgICAgICAgIHVpRWxlbWVudC5lbGVtVGV4dC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMS41KSc7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVpRWxlbWVudC5lbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjaGFyQ291bnRlcisrO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudHNbZm91bmRdLnN5bWJvbHNbY2hhckNvdW50ZXJdID09PSBrZXkpIHtcbiAgICAgICAgICAgIC8vINCh0LvQtdC00YPRjtGJ0LDRjyDQutC70LDQstC40YjQsCDQvdCw0LbQsNGC0LBcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNbZm91bmRdLmVsZW1TeW1ib2xzW2NoYXJDb3VudGVyXS5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlSW4nKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNbZm91bmRdLmVsZW1TeW1ib2xzW2NoYXJDb3VudGVyXS5jbGFzc0xpc3QuYWRkKCdmYWRlT3V0RG93bicpO1xuICAgICAgICAgICAgY2hhckNvdW50ZXIrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vICDQvtGI0LjQsdGB0Y9cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNbZm91bmRdLnNldFRleHQodGhpcy5tYWtlUGhyYXNlKHRoaXMuZWxlbWVudHNbZm91bmRdLnRleHQubGVuZ3RoKSk7XG4gICAgICAgICAgICBmb3VuZCA9IC0xO1xuICAgICAgICAgICAgY2hhckNvdW50ZXIgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvdW5kID49IDAgJiYgdGhpcy5lbGVtZW50c1tmb3VuZF0uc3ltYm9scy5sZW5ndGggPT09IGNoYXJDb3VudGVyKSB7XG4gICAgICAgICAgICAvLyDQn9C+0YHQu9C10LTQvdC40Y/RjyDQutC70LDQstC40YjQsCwg0LfQsNC/0YPRgdC60LDQtdC8INC00LXQudGB0YLQstC40LUsINC/0LXRgNC10LPQtdC90LXRgNC40YDRg9C10Lwg0YTRgNCw0LfRg1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50c1tmb3VuZF0uc2V0VGV4dCh0aGlzLm1ha2VQaHJhc2UodGhpcy5lbGVtZW50c1tmb3VuZF0udGV4dC5sZW5ndGgpKTtcbiAgICAgICAgICAgIGdhbWVPYmplY3RzLnBsYXllci5ydW5BY3Rpb24odGhpcy5lbGVtZW50c1tmb3VuZF0uYWN0aW9uICwgK3RoaXMuZWxlbWVudHNbZm91bmRdLmRpcmVjdGlvbik7XG4gICAgICAgICAgICB0aW1lU3RhcnQgPSAwO1xuICAgICAgICAgICAgZm91bmQgPSAtMTtcbiAgICAgICAgICAgIGNoYXJDb3VudGVyID0gMDtcbiAgICAgICAgICAgIGFjdGlvblBsYXllZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoZm91bmQgPj0gMCApIHtcbiAgICAgICAgICAgIC8vINCd0LUg0L/QvtGB0LvQtdC00L3Rj9GPINC60LvQsNCy0LjRiNCwLCDQstGL0LTQtdC70Y/QtdC8INC10LUg0LrQsNC6INGB0LvQtdC00YPRjtGJ0YPRjlxuICAgICAgICAgICAgdGhpcy5lbGVtZW50c1tmb3VuZF0uZWxlbVN5bWJvbHNbY2hhckNvdW50ZXJdLmNsYXNzTGlzdC5hZGQoJ3VpX19zeW1ib2xfc2VsZWN0ZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmb3VuZCA8IDApe1xuICAgICAgICAgICAgLy8g0JLQvtC30LLRgNCw0YIg0LIg0LjRgdGF0L7QtNC90YPRjlxuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5tYXAoKHVpRWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHVpRWxlbWVudC5lbGVtLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICB1aUVsZW1lbnQuZWxlbVRleHQuc3R5bGUudHJhbnNmb3JtID0gJyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvdW5kID0gLTE7XG4gICAgICAgICAgICBjaGFyQ291bnRlciA9IDA7XG4gICAgICAgICAgICBpZiAoYWN0aW9uUGxheWVkKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gVWlFbGVtZW50IChlbGVtKSB7XG4gICAgICAgIHRoaXMuZWxlbSA9IGVsZW07XG4gICAgICAgIHRoaXMudGV4dCA9ICcnO1xuICAgICAgICB0aGlzLmFjdGlvbiA9IGVsZW0uZGF0YXNldC5hY3Rpb247XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gZWxlbS5kYXRhc2V0LmRpcmVjdGlvbjtcbiAgICAgICAgdGhpcy5pY29uID0gZWxlbS5kYXRhc2V0Lmljb247XG4gICAgICAgIHRoaXMuc3ltYm9scyA9IFtdO1xuICAgICAgICB0aGlzLmVsZW1TeW1ib2xzID0gW107XG5cbiAgICAgICAgdGhpcy5lbGVtVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLmVsZW1UZXh0LmNsYXNzTGlzdC5hZGQoJ3VpX190ZXh0Jyk7XG4gICAgICAgIHRoaXMuZWxlbS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1UZXh0KTtcblxuICAgICAgICB0aGlzLmVsZW1VaUljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5lbGVtVWlJY29uLmNsYXNzTGlzdC5hZGQoJ3VpX19pY29uJyk7XG4gICAgICAgIHRoaXMuZWxlbS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1VaUljb24pO1xuXG4gICAgICAgIHRoaXMuZWxlbUljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5lbGVtSWNvbi5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgICAgIHRoaXMuZWxlbUljb24uY2xhc3NMaXN0LmFkZCgnaWNvbl8nICsgdGhpcy5pY29uKTtcbiAgICAgICAgdGhpcy5lbGVtVWlJY29uLmFwcGVuZENoaWxkKHRoaXMuZWxlbUljb24pO1xuXG5cbiAgICAgICAgdGhpcy5zZXRUZXh0ID0gKHRleHQpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICAgICAgICB0aGlzLmVsZW1UZXh0LmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgICAgICBsZXQgZmFkZUNsYXNzID0gJ2ZhZGVJbic7XG4gICAgICAgICAgICBsZXQgZGVsYXkgPSAxMDA7XG4gICAgICAgICAgICB0aGlzLnRleHQuc3BsaXQoJycpLm1hcCgoc3ltYm9sLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgICAgIHN5bWJvbCA9IHN5bWJvbCA9PT0gJyAnID8gJyZuYnNwOycgOiBzeW1ib2w7XG4gICAgICAgICAgICAgICAgdGhpcy5zeW1ib2xzW2luZGV4XSA9IHN5bWJvbDtcbiAgICAgICAgICAgICAgICBzcGFuLmlubmVySFRNTCA9IHN5bWJvbDtcbiAgICAgICAgICAgICAgICBzcGFuLmNsYXNzTmFtZSA9ICd1aV9fc3ltYm9sICcgKyBmYWRlQ2xhc3M7XG4gICAgICAgICAgICAgICAgc3Bhbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgICAgICAgICAgICAgc3Bhbi5zdHlsZS5hbmltYXRpb25EZWxheSA9IGluZGV4ICogZGVsYXkgKyAnbXMnO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbVN5bWJvbHNbaW5kZXhdID0gc3BhbjtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1UZXh0LmFwcGVuZENoaWxkKHNwYW4pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLmNsYXNzTGlzdC5yZW1vdmUoZmFkZUNsYXNzKTtcbiAgICAgICAgICAgICAgICB9LCAoaW5kZXggKyAxKSAqIGRlbGF5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn0iLCJ2YXIgYWN0aXZlRHJhd3NMaXN0ID0gW107XG52YXIgc2hvd0ZyYW1lUmF0ZSA9IGZhbHNlO1xuXG5mdW5jdGlvbiBhbmltYXRlKG9wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyAgPSAodHlwZW9mKG9wdGlvbnMpICAgICAgICAgID09ICdvYmplY3QnKSAgID8gb3B0aW9ucyAgICAgICAgICA6IHt9O1xuICAgIHZhciBkdXJhdGlvbiA9ICh0eXBlb2Yob3B0aW9ucy5kdXJhdGlvbikgPT0gJ251bWJlcicpICAgPyBvcHRpb25zLmR1cmF0aW9uIDogMTAwMDtcbiAgICB2YXIgZGVsYXkgICAgPSAodHlwZW9mKG9wdGlvbnMuZGVsYXkpICAgID09ICdudW1iZXInKSAgID8gb3B0aW9ucy5kZWxheSAgICA6IDA7XG4gICAgdmFyIGZyb20gICAgID0gKHR5cGVvZihvcHRpb25zLmZyb20pICAgICA9PSAnbnVtYmVyJykgICA/IG9wdGlvbnMuZnJvbSAgICAgOiAxO1xuICAgIHZhciB0byAgICAgICA9ICh0eXBlb2Yob3B0aW9ucy50bykgICAgICAgPT0gJ251bWJlcicpICAgPyBvcHRpb25zLnRvICAgICAgIDogMTAwO1xuICAgIHZhciB0aW1pbmcgICA9ICh0eXBlb2Yob3B0aW9ucy50aW1pbmcpICAgPT0gJ2Z1bmN0aW9uJykgPyBvcHRpb25zLnRpbWluZyAgIDogbGluZWFyO1xuICAgIHZhciBkcmF3ICAgICA9ICh0eXBlb2Yob3B0aW9ucy5kcmF3KSAgICAgPT0gJ2Z1bmN0aW9uJykgPyBvcHRpb25zLmRyYXcgICAgIDogZnVuY3Rpb24ocHJvZ3Jlc3Mpe2NvbnNvbGUubG9nKHByb2dyZXNzICogMTAwKX07XG4gICAgdmFyIGJlZm9yZSAgID0gKHR5cGVvZihvcHRpb25zLmJlZm9yZSkgICA9PSAnZnVuY3Rpb24nKSA/IG9wdGlvbnMuYmVmb3JlICAgOiBmdW5jdGlvbigpIHt9O1xuICAgIHZhciBhZnRlciAgICA9ICh0eXBlb2Yob3B0aW9ucy5hZnRlcikgICAgPT0gJ2Z1bmN0aW9uJykgPyBvcHRpb25zLmFmdGVyICAgIDogZnVuY3Rpb24oKSB7fTtcblxuICAgIHZhciBmcmFjdGlvbkZyb20gPSBmcm9tIC8gMTAwO1xuICAgIHZhciBmcmFjdGlvblRvICAgPSB0byAvIDEwMDtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzdGFydCAgICA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICB2YXIgdGltZUxhc3QgPSBzdGFydDtcblxuICAgICAgICBmb3IgKHZhciBpID0gYWN0aXZlRHJhd3NMaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBpZiAoYWN0aXZlRHJhd3NMaXN0W2ldID09PSBkcmF3KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBhbmltYXRpb25JbmRleCA9IGFjdGl2ZURyYXdzTGlzdC5wdXNoKGRyYXcpO1xuXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiBhbmltYXRlKHRpbWUpIHtcbiAgICAgICAgICAgIGlmIChiZWZvcmUpIHtcbiAgICAgICAgICAgICAgICBiZWZvcmUoKTtcbiAgICAgICAgICAgICAgICBiZWZvcmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0aW1lRnJhY3Rpb24gPSAodGltZSAtIHN0YXJ0KSAvIGR1cmF0aW9uO1xuICAgICAgICAgICAgaWYgKHRpbWVGcmFjdGlvbiA+IDEpIHRpbWVGcmFjdGlvbiA9IDE7XG5cbiAgICAgICAgICAgIGlmIChmcmFjdGlvbkZyb20gPCBmcmFjdGlvblRvKSB7XG4gICAgICAgICAgICAgICAgdGltZUZyYWN0aW9uID0gdGltZUZyYWN0aW9uICsgZnJhY3Rpb25Gcm9tO1xuICAgICAgICAgICAgICAgIHZhciB0ZXJtaW5hdGlvbkNvbmRpdGlvbiA9IHRpbWVGcmFjdGlvbiA8IGZyYWN0aW9uVG87XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRpbWVGcmFjdGlvbiA9IC0odGltZUZyYWN0aW9uIC0gZnJhY3Rpb25Gcm9tKTtcbiAgICAgICAgICAgICAgICB2YXIgdGVybWluYXRpb25Db25kaXRpb24gPSB0aW1lRnJhY3Rpb24gPiBmcmFjdGlvblRvO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSB0aW1pbmcodGltZUZyYWN0aW9uKTtcblxuICAgICAgICAgICAgZHJhdyhwcm9ncmVzcyk7XG5cbiAgICAgICAgICAgIGlmICh0ZXJtaW5hdGlvbkNvbmRpdGlvbikge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcblxuICAgICAgICAgICAgICAgIGlmIChzaG93RnJhbWVSYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZyYW1lUmF0ZSh0aW1lTGFzdCwgdGltZSksIE1hdGgucm91bmQodGltZUZyYWN0aW9uICogMTAwKSk7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVMYXN0ID0gdGltZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFjdGl2ZURyYXdzTGlzdC5zcGxpY2UoYWN0aXZlRHJhd3NMaXN0LmluZGV4T2YoZHJhdyksIDEpO1xuICAgICAgICAgICAgICAgIGlmIChhZnRlcikgYWZ0ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSwgZGVsYXkpO1xufVxuXG5mdW5jdGlvbiBmcmFtZVJhdGUodGltZUxhc3QsIHRpbWVOb3cpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZCgxMDAwIC8gKHRpbWVOb3cgLSB0aW1lTGFzdCkpO1xufVxuXG5mdW5jdGlvbiB6b25lKGN1cnJlbnQsIGZyb20sIHRvLCBkcmF3KSB7XG4gICAgY3VycmVudCA9IGN1cnJlbnQgKiAxMDA7XG4gICAgZnJvbSAgICA9IGZyb20gKiAxMDA7XG4gICAgdG8gICAgICA9IHRvICogMTAwO1xuICAgIGRyYXcgICAgPSBkcmF3ICogMTAwO1xuXG4gICAgaWYgKGN1cnJlbnQgPj0gZnJvbSAmJiBjdXJyZW50IDw9IHRvKSB7XG4gICAgICAgIHZhciBwcm9ncmVzcyA9IChjdXJyZW50IC0gZnJvbSkgLyAodG8gLSBmcm9tKTtcbiAgICAgICAgaWYgKGRyYXcpIGRyYXcocHJvZ3Jlc3MpO1xuICAgICAgICByZXR1cm4gcHJvZ3Jlc3M7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50IDw9IGZyb20pIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50ID49IHRvKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH1cbn1cblxuXG4vLyDQv9GA0LXQvtCx0YDQsNC30L7QstCw0YLQtdC70Ywg0LIgZWFzZU91dFxuZnVuY3Rpb24gbWFrZUVhc2VPdXQodGltaW5nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHRpbWVGcmFjdGlvbikge1xuICAgICAgICByZXR1cm4gMSAtIHRpbWluZygxIC0gdGltZUZyYWN0aW9uKTtcbiAgICB9XG59XG4vLyDQv9GA0LXQvtCx0YDQsNC30L7QstCw0YLQtdC70Ywg0LIgZWFzZU91dFxuZnVuY3Rpb24gbWFrZUVhc2VJbk91dCh0aW1pbmcpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odGltZUZyYWN0aW9uKSB7XG4gICAgICAgIGlmICh0aW1lRnJhY3Rpb24gPCAwLjUpXG4gICAgICAgICAgICByZXR1cm4gdGltaW5nKDIgKiB0aW1lRnJhY3Rpb24pIC8gMjtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuICgyIC0gdGltaW5nKDIgKiAoMSAtIHRpbWVGcmFjdGlvbikpKSAvIDI7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBsaW5lYXIocHJvZ3Jlc3MpIHtcbiAgICByZXR1cm4gcHJvZ3Jlc3M7XG59XG5cbmZ1bmN0aW9uIHF1YWQocHJvZ3Jlc3MpIHtcbiAgICByZXR1cm4gTWF0aC5wb3cocHJvZ3Jlc3MsIDIpO1xufVxudmFyIHF1YWRFYXNlT3V0ID0gbWFrZUVhc2VPdXQocXVhZCk7XG5cbmZ1bmN0aW9uIGNpcmModGltZUZyYWN0aW9uKSB7XG4gICAgcmV0dXJuIDEgLSBNYXRoLnNpbihNYXRoLmFjb3ModGltZUZyYWN0aW9uKSlcbn1cbnZhciBjaXJjRWFzZU91dCA9IG1ha2VFYXNlT3V0KGNpcmMpO1xuXG5mdW5jdGlvbiBiYWNrKHgsIHRpbWVGcmFjdGlvbikge1xuICAgIHJldHVybiBNYXRoLnBvdyh0aW1lRnJhY3Rpb24sIDIpICogKCh4ICsgMSkgKiB0aW1lRnJhY3Rpb24gLSB4KVxufVxudmFyIGJhY2tFYXNlT3V0ID0gbWFrZUVhc2VPdXQoYmFjayk7XG5cbmZ1bmN0aW9uIGJvdW5jZShwcm9ncmVzcykge1xuICAgIGZvciAodmFyIGEgPSAwLCBiID0gMSwgcmVzdWx0OyAxOyBhICs9IGIsIGIgLz0gMikge1xuICAgICAgICBpZiAocHJvZ3Jlc3MgPj0gKDcgLSA0ICogYSkgLyAxMSkge1xuICAgICAgICAgICAgcmV0dXJuIC1NYXRoLnBvdygoMTEgLSA2ICogYSAtIDExICogcHJvZ3Jlc3MpIC8gNCwgMikgKyBNYXRoLnBvdyhiLCAyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbnZhciBib3VuY2VFYXNlT3V0ID0gbWFrZUVhc2VPdXQoYm91bmNlKTtcblxuZnVuY3Rpb24gZWxhc3RpYyh4LCB0aW1lRnJhY3Rpb24pIHtcbiAgICByZXR1cm4gTWF0aC5wb3coMiwgMTAgKiAodGltZUZyYWN0aW9uIC0gMSkpICogTWF0aC5jb3MoMjAgKiBNYXRoLlBJICogeCAvIDMgKiB0aW1lRnJhY3Rpb24pXG59XG52YXIgZWxhc3RpY0Vhc2VPdXQgPSBtYWtlRWFzZU91dChlbGFzdGljKTtcbiIsIi8qKlxuICog0KHQvtC60YDQsNGJ0LXQvdC40LUg0LTQu9GPINC00L7QsdCw0LLQu9C10L3QuNGPINGB0L7QsdGL0YLQuNGPIERPTUNvbnRlbnRMb2FkZWRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIEPQu9GD0YjQsNGC0LXQu9GMINGB0L7QsdGL0YLQuNGPXG4gKi9cbmZ1bmN0aW9uIHJlYWR5KGxpc3RlbmVyKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgbGlzdGVuZXIpO1xufVxuXG4vKipcbiAqIEN1c3RvbSBFdmVudCBSZXNpemVcbiAqL1xuKGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aHJvdHRsZSA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIG9iaikge1xuICAgICAgICBvYmogPSBvYmogfHwgd2luZG93O1xuICAgICAgICB2YXIgcnVubmluZyA9IGZhbHNlO1xuICAgICAgICB2YXIgZnVuYyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgICBydW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBvYmouZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQobmFtZSkpO1xuICAgICAgICAgICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBvYmouYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmdW5jKTtcbiAgICB9O1xuXG4gICAgLyogaW5pdCAtIHlvdSBjYW4gaW5pdCBhbnkgZXZlbnQgKi9cbiAgICB0aHJvdHRsZShcInJlc2l6ZVwiLCBcIm9wdGltaXplZFJlc2l6ZVwiKTtcbn0pKCk7XG5cblxuLyoqXG4gKiDQlNC+0LHQsNCy0LvQtdC90LjQtSDRgdC+0LHRi9GC0LjQuVxuICogQHBhcmFtIHtbdHlwZV19ICAgb2JqZWN0ICAgRE9NINGD0LfQtdC7XG4gKiBAcGFyYW0ge3N0cmluZ30gICB0eXBlICAgICDQotC40L8g0L/RgNC+0YHQu9GD0YjQuNCy0LDQtdC80L7Qs9C+INGB0L7QsdGL0YLQuNGPLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgQ9C70YPRiNCw0YLQtdC70Ywg0YHQvtCx0YvRgtC40Y9cbiAqL1xuZnVuY3Rpb24gYWRkRXZlbnQob2JqZWN0LCB0eXBlLCBsaXN0ZW5lcikge1xuICAgIGlmIChvYmplY3QgPT0gbnVsbCB8fCB0eXBlb2Yob2JqZWN0KSA9PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuICAgIGlmIChvYmplY3QuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBvYmplY3QuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgIH0gZWxzZSBpZiAob2JqZWN0LmF0dGFjaEV2ZW50KSB7XG4gICAgICAgIG9iamVjdC5hdHRhY2hFdmVudChcIm9uXCIgKyB0eXBlLCBsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0W1wib25cIiArIHR5cGVdID0gbGlzdGVuZXI7XG4gICAgfVxufTtcblxuLyoqXG4gKiDRgW9tcGFyZUZ1bmN0aW9uINC00LvRjyBhcnIuc29ydCwg0LTQu9GPINGB0L7RgNGC0LjRgNC+0LrQuCDRgdC70YPRh9C50L3QvtC8INC/0L7RgNGP0LTQutC1XG4gKi9cbmZ1bmN0aW9uIGNvbXBhcmVSYW5kb20oYSwgYikge1xuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpIC0gMC41O1xufVxuXG4vKipcbiAqINCf0L7Qu9GD0YfQtdC90LjQtSBET00g0LTQtdGA0LXQstCwINC00YDRg9Cz0L7QuSDRgdGC0YDQsNC90LjRhtGLXG4gKiBAcGFyYW0gIHtTdHJpbmd9ICAgdXJsICAgICAgVVJMINGB0YLRgNCw0L3QuNGG0YtcbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFjayDQn9C10YDQtdC00LDQstCw0LXQvNCw0Y8g0YTRg9C90LrRhtC40Y9cbiAqL1xuZnVuY3Rpb24gZ2V0RG9jdW1lbnQodXJsLCBjYWxsYmFjaylcbntcbiAgdmFyIGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgaHR0cC5vcGVuKCdHRVQnLCB1cmwpO1xuICBodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpXG4gIHtcbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09IDQgJiYgdGhpcy5zdGF0dXMgPT0gMjAwKSB7XG4gICAgICB2YXIgZG9jID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyh0aGlzLnJlc3BvbnNlVGV4dCwgXCJ0ZXh0L2h0bWxcIik7ICAvLyDQv9GA0LXQvtCx0YDQsNC30L7QstCw0YLRjCDRgtC10LrRgdGCINCyIEhUTUxcblxuICAgICAgY2FsbGJhY2soZG9jKTtcbiAgICB9XG4gIH1cbiAgaHR0cC5zZW5kKG51bGwpO1xufVxuXG4vKipcbiAqICDQstC+0LfQstGA0LDRidCw0LXRgiBjb29raWUg0YEg0LjQvNC10L3QtdC8IG5hbWUsINC10YHQu9C4INC10YHRgtGMLCDQtdGB0LvQuCDQvdC10YIsINGC0L4gdW5kZWZpbmVkXG4gKi9cbmZ1bmN0aW9uIGdldENvb2tpZShuYW1lKSB7XG4gIHZhciBtYXRjaGVzID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoXG4gICAgXCIoPzpefDsgKVwiICsgbmFtZS5yZXBsYWNlKC8oW1xcLiQ/Knx7fVxcKFxcKVxcW1xcXVxcXFxcXC9cXCteXSkvZywgJ1xcXFwkMScpICsgXCI9KFteO10qKVwiXG4gICkpO1xuICByZXR1cm4gbWF0Y2hlcyA/IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaGVzWzFdKSA6IHVuZGVmaW5lZDtcbn1cbiIsInZhciBicmVha3BvaW50ID0ge1xuICAgICdzbWFsbCc6IDc2NyxcbiAgICAnbWVkaXVtJzogOTkyLFxuICAgICdsYXJnZSc6IDEyMDBcbn07XG5cbmZ1bmN0aW9uIHJlc3BvbmRUbyhicmVha3BvaW50LCBjYWxsYmFjaywgcnVuV2hlbkNhbGxlZCwgYWRkRXZlbnQpIHtcbiAgICBpZiAoYnJlYWtwb2ludCA+PSB3aW5kb3cuaW5uZXJXaWR0aCkge1xuICAgICAgICB2YXIgYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgaWYgKHJ1bldoZW5DYWxsZWQpIHtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYWN0aXZlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGFkZEV2ZW50KSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3B0aW1pemVkUmVzaXplXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCFhY3RpdmUpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChicmVha3BvaW50ID49IHdpbmRvdy5pbm5lcldpZHRoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJyZWFrcG9pbnQgPD0gd2luZG93LmlubmVyV2lkdGgpIGFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlc3BvbmRGcm9tKGJyZWFrcG9pbnQsIGNhbGxiYWNrLCBydW5XaGVuQ2FsbGVkLCBhZGRFdmVudCkge1xuICAgIGlmIChicmVha3BvaW50IDw9IHdpbmRvdy5pbm5lcldpZHRoKSB7XG4gICAgICAgIHZhciBhY3RpdmUgPSB0cnVlO1xuICAgICAgICBpZiAocnVuV2hlbkNhbGxlZCkge1xuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBhY3RpdmUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoYWRkRXZlbnQpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcHRpbWl6ZWRSZXNpemVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIWFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGJyZWFrcG9pbnQgPD0gd2luZG93LmlubmVyV2lkdGgpIHtcblxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYnJlYWtwb2ludCA+PSB3aW5kb3cuaW5uZXJXaWR0aCkgYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdfQ==
