"use strict";function funText(t,a){var n=t.innerText;t.innerHTML="",n.split("").map(function(n,e){var i=document.createElement("span");n=" "===n?"&nbsp;":n,i.innerHTML=n,i.className=a,i.style.display="inline-block",i.style.animationDelay=100*e+"ms",t.appendChild(i)})}
"use strict";function Hero(s){var n=this,a=[],o=s.querySelector(".hero__skillet");this.state={action:!1,nextAction:!1,pose:null,direction:1,directionY:1,positionX:0,positionY:0,speedX:0,boostX:0,speedY:0,boostY:0};function i(t,e,s,o,n,a){return s=Math.abs(s)<1?0:s,0<(e=e<=0?0:e)?(e-=1+Math.abs(e)/100,s+=1+Math.abs(e)/100):0!==s&&0<s?s-=1+Math.abs(s)/100:0!==s&&s<0&&(s+=1+Math.abs(s)/100),n<(t+=s/10*o)?o=0<s?-1:1:t<a&&(o=0<s?1:-1),{position:t,boost:e,speed:s,direction:o}}animationsLoop.push(function(){var t=i(n.state.positionX,n.state.boostX,n.state.speedX,n.state.direction,arena.xMax,arena.xMin);n.state.positionX=t.position,n.state.boostX=t.boost,n.state.speedX=t.speed,n.state.direction=t.direction;var e=i(n.state.positionY,n.state.boostY,n.state.speedY,n.state.directionY,arena.yMax,arena.yMin);n.state.positionY=e.position,n.state.boostY=e.boost,n.state.speedY=e.speed,n.state.directionY=e.direction,0===n.state.speedY&&0<n.state.positionY&&(n.state.directionY=-1),-1===n.state.directionY&&(n.state.speedY+=3),n.state.positionY<=0&&n.state.speedY<80&&(n.state.boostY=0,n.state.speedY=0,n.state.positionY=0,n.state.directionY=1,"jump"===n.state.pose&&(n.setPose("landed"),setTimeout(function(){n.unsetPose("landed"),n.unsetPose("jump")},300))),0<n.state.speedY?n.state.pose||n.setPose("jump"):n.unsetPose("jump"),s.style.transform="translate(".concat(n.state.positionX,"%, ").concat(-n.state.positionY,"%)"),o.style.transform="scaleX(".concat(n.state.direction,")")}),this.setPose=function(t){return n.state.pose&&requestAnimationFrame(function(){s.classList.remove("hero_"+n.state.pose)}),t&&(n.state.pose=t,requestAnimationFrame(function(){s.classList.add("hero_"+t)})),n},this.unsetPose=function(t){return n.state.pose=null,requestAnimationFrame(function(){s.classList.remove("hero_"+t)}),n},this.setSkin=function(t){return s.classList.remove("hero_"+n.state.skin),(n.state.skin=t)&&s.classList.add("hero_"+t),n},this.nextAction=!1,this.runAction=function(t,e){1!==e&&-1!==e||e!==n.state.direction&&(n.state.direction=e,n.state.speedX=0),n.state.action&&(n.state.nextAction=[t,e]),console.log(n.state.nextAction);var s=!!c[t]&&c[t];if(!s)return n;if(-1!==a.indexOf(t))return n;a.push(t);var o=0;return s.map(function(t){setTimeout(t.action,o),o+=t.duration?t.duration:0}),setTimeout(function(){a.splice(a.indexOf(t,1))},o),n};var c={jump:[{name:"jump-start",duration:300,action:function(){0<!n.state.positionY&&(n.state.speedY=60),n.state.boostX=30}}],down:[{name:"down-start",duration:500,action:function(){n.setPose("down")}},{name:"down-end",action:function(){n.unsetPose("down")}}],move:[{name:"Step1",duration:300,action:function(){n.state.boostX=35,n.state.pose||n.setPose("step-1")}},{name:"Step2",duration:300,action:function(){n.unsetPose("step-1"),n.state.pose||n.setPose("step-2")}},{name:"stop",action:function(){n.unsetPose("step-2")}}],damage:[{name:"takeDamageStart",duration:300,action:function(){n.setPose("damage")}},{name:"takeDamageEnd",action:function(){n.unsetPose("damage")}}],hit:[{name:"hit1",duration:300,action:function(){n.setPose("hit-1")}},{name:"hit2",duration:300,action:function(){n.unsetPose("hit-1"),n.setPose("hit-2");var t=!1;for(var e in gameObjects)if(gameObjects[e]!==n){var s=gameObjects[e].state.positionX-n.state.positionX,o=gameObjects[e].state.positionY-n.state.positionY;Math.abs(s)<=200&&Math.abs(o)<100&&(t||(0<s?(n.state.direction=1,gameObjects[e].state.direction=-1):(n.state.direction=-1,gameObjects[e].state.direction=1),t=!0),n.state.direction+gameObjects[e].state.direction===0&&0<s*n.state.direction&&(gameObjects[e].state.speedX=-50,gameObjects[e].runAction("damage")))}}},{name:"hitEnd",action:function(){n.unsetPose("hit-2")}}]};return this}
"use strict";function Ui(){var o=this,n=0,l=-1;this.makePhrase=function(e){for(var l="",i="abcdefghijklmnopqrstuvwxyz",m=i.length,t=function(t){var s=i.charAt(Math.floor(Math.random()*m)),n=!1;0===t&&o.elements.map(function(e){e.symbols[0]===s&&(t=-1,n=!0)}),n||(l+=s),a=t},a=0;a<e;a++)t(a);return l},this.elements=[];for(var e=document.querySelectorAll(".ui__element"),t=0;t<e.length;t++){this.elements[t]=new UiElement(e[t]);var s=4;config.lengthPhrasesForActions[this.elements[t].action]&&(s=config.lengthPhrasesForActions[this.elements[t].action]),this.elements[t].setText(this.makePhrase(s))}return this.found=function(s){l<0?(o.elements.map(function(e,t){e.symbols[n]===s?(e.elemSymbols[n].classList.remove("fadeIn"),e.elemSymbols[n].classList.add("fadeOutDown"),e.elemText.style.transform="scale(1.5)",l=t):e.elem.style.opacity="0"}),n++):o.elements[l].symbols[n]===s?(o.elements[l].elemSymbols[n].classList.remove("fadeIn"),o.elements[l].elemSymbols[n].classList.add("fadeOutDown"),n++):(o.elements[l].setText(o.makePhrase(o.elements[l].text.length)),l=-1,n=0),0<=l&&o.elements[l].symbols.length===n?(o.elements[l].setText(o.makePhrase(o.elements[l].text.length)),gameObjects.player1.runAction(o.elements[l].action,+o.elements[l].direction),l=-1,n=0):0<=l&&o.elements[l].elemSymbols[n].classList.add("symbol_selected"),l<0&&(o.elements.map(function(e){e.elem.style.opacity="1",e.elemText.style.transform=""}),l=-1,n=0)},this}function UiElement(e){var n=this;return this.elem=e,this.text="",this.action=e.dataset.action,this.direction=e.dataset.direction,this.icon=e.dataset.icon,this.symbols=[],this.elemSymbols=[],this.elemText=document.createElement("div"),this.elemText.classList.add("ui__text"),this.elem.appendChild(this.elemText),this.elemUiIcon=document.createElement("div"),this.elemUiIcon.classList.add("ui__icon"),this.elem.appendChild(this.elemUiIcon),this.elemIcon=document.createElement("div"),this.elemIcon.classList.add("icon"),this.elemIcon.classList.add("icon_"+this.icon),this.elemUiIcon.appendChild(this.elemIcon),this.setText=function(e){n.text=e,n.elemText.innerHTML="",n.text.split("").map(function(e,t){var s=document.createElement("span");e=" "===e?"&nbsp;":e,n.symbols[t]=e,s.innerHTML=e,s.className="symbol fadeIn",s.style.display="inline-block",s.style.animationDelay=100*t+"ms",n.elemSymbols[t]=s,n.elemText.appendChild(s)})},this}
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var activeDrawsList=[],showFrameRate=!1;function animate(t){var i="number"==typeof(t="object"==_typeof(t)?t:{}).duration?t.duration:1e3,e="number"==typeof t.delay?t.delay:0,n="number"==typeof t.from?t.from:1,o="number"==typeof t.to?t.to:100,f="function"==typeof t.timing?t.timing:linear,c="function"==typeof t.draw?t.draw:function(t){console.log(100*t)},s="function"==typeof t.before?t.before:function(){},m="function"==typeof t.after?t.after:function(){},p=n/100,y=o/100;setTimeout(function(){for(var a=performance.now(),u=a,t=activeDrawsList.length-1;0<=t;t--)if(activeDrawsList[t]===c)return!1;activeDrawsList.push(c);requestAnimationFrame(function t(e){s&&(s(),s=!1);var n=(e-a)/i;if(1<n&&(n=1),p<y)var o=(n+=p)<y;else o=y<(n=-(n-p));var r=f(n);c(r),o?(requestAnimationFrame(t),showFrameRate&&(console.log(frameRate(u,e),Math.round(100*n)),u=e)):(activeDrawsList.splice(activeDrawsList.indexOf(c),1),m&&m())})},e)}function frameRate(t,e){return Math.round(1e3/(e-t))}function zone(t,e,n,o){if(n*=100,o*=100,(e*=100)<=(t*=100)&&t<=n){var r=(t-e)/(n-e);return o&&o(r),r}return t<=e?0:n<=t?1:void 0}function makeEaseOut(e){return function(t){return 1-e(1-t)}}function makeEaseInOut(e){return function(t){return t<.5?e(2*t)/2:(2-e(2*(1-t)))/2}}function linear(t){return t}function quad(t){return Math.pow(t,2)}var quadEaseOut=makeEaseOut(quad);function circ(t){return 1-Math.sin(Math.acos(t))}var circEaseOut=makeEaseOut(circ);function back(t,e){return Math.pow(e,2)*((t+1)*e-t)}var backEaseOut=makeEaseOut(back);function bounce(t){for(var e=0,n=1;;e+=n,n/=2)if((7-4*e)/11<=t)return-Math.pow((11-6*e-11*t)/4,2)+Math.pow(n,2)}var bounceEaseOut=makeEaseOut(bounce);function elastic(t,e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}var elasticEaseOut=makeEaseOut(elastic);
"use strict";function ready(e){document.addEventListener("DOMContentLoaded",e)}function addEvent(e,t,n){null!=e&&void 0!==e&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n)}function compareRandom(e,t){return Math.random()-.5}function getDocument(e,t){var n=new XMLHttpRequest;n.open("GET",e),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=(new DOMParser).parseFromString(this.responseText,"text/html");t(e)}},n.send(null)}function getCookie(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}!function(e,t,n){n=n||window;var o=!1;n.addEventListener(e,function(){o||(o=!0,requestAnimationFrame(function(){n.dispatchEvent(new CustomEvent(t)),o=!1}))})}("resize","optimizedResize");
"use strict";var breakpoint={small:767,medium:992,large:1200};function respondTo(i,n,e,t){if(i>=window.innerWidth){var r=!0;e&&requestAnimationFrame(n)}else r=!1;t&&window.addEventListener("optimizedResize",function(){if(!r&&(r=!0,i>=window.innerWidth))return setTimeout(function(){requestAnimationFrame(n)},100),!0;i<=window.innerWidth&&(r=!1)})}function respondFrom(i,n,e,t){if(i<=window.innerWidth){var r=!0;e&&requestAnimationFrame(n)}else r=!1;t&&window.addEventListener("optimizedResize",function(){if(!r&&(r=!0,i<=window.innerWidth))return setTimeout(function(){requestAnimationFrame(n)},100),!0;i>=window.innerWidth&&(r=!1)})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGlvbnMvZnVuVGV4dC5qcyIsImNvbXBvbmVudHMvaGVyby5qcyIsImNvbXBvbmVudHMvdWkuanMiLCJoZWxwZXJzL2FuaW1hdGUuanMiLCJoZWxwZXJzL290aGVycy5qcyIsImhlbHBlcnMvcmVzcG9uZC5qcyJdLCJuYW1lcyI6WyJmdW5UZXh0IiwiZWxlbVRleHQiLCJhbmltYXRlQ2xhc3MiLCJ0ZXh0IiwiaW5uZXJUZXh0IiwiaW5uZXJIVE1MIiwic3ltYm9sIiwiaW5kZXgiLCJzcGxpdCIsInNwYW4iLCJtYXAiLCJjcmVhdGVFbGVtZW50IiwiZG9jdW1lbnQiLCJjbGFzc05hbWUiLCJkaXNwbGF5Iiwic3R5bGUiLCJhbmltYXRpb25EZWxheSIsIkhlcm8iLCJlbGVtSGVybyIsIl90aGlzIiwidGhpcyIsImVsZW1Ta2lsbGV0IiwicXVlcnlTZWxlY3RvciIsInN0YXRlIiwiYWN0aW9uIiwibmV4dEFjdGlvbiIsImRpcmVjdGlvbiIsImRpcmVjdGlvblkiLCJwb3NpdGlvblgiLCJwb3NpdGlvblkiLCJzcGVlZFgiLCJib29zdFgiLCJzcGVlZFkiLCJnZXROZXh0UG9zaXRpb25zIiwicG9zaXRpb24iLCJib29zdCIsInNwZWVkIiwibWF4IiwibWluIiwiTWF0aCIsImFicyIsImFuaW1hdGlvbnNMb29wIiwicHVzaCIsIm5leHRQb3NpdGlvbnNYIiwibmV4dFBvc2l0aW9uc1kiLCJhcmVuYSIsInlNYXgiLCJzZXRQb3NlIiwidW5zZXRQb3NlIiwiYm9vc3RZIiwicG9zZSIsInNldFRpbWVvdXQiLCJ0cmFuc2Zvcm0iLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJjb25jYXQiLCJhZGQiLCJza2luIiwiYWN0aW9ucyIsImFjdGl2ZUFjdGlvbnMiLCJhY3Rpb25OYW1lIiwiZGVsYXkiLCJhY3Rpb25TdGVwIiwiZHVyYXRpb24iLCJjb25zb2xlIiwibG9nIiwiaW5kZXhPZiIsIm5hbWUiLCJzcGxpY2UiLCJqdW1wIiwiZG93biIsIm1vdmUiLCJkYW1hZ2UiLCJjaGFuZ2VkRGlyZWN0aW9uIiwiZGlzdGFuY2VZIiwiZGlzdGFuY2UiLCJnYW1lT2JqZWN0cyIsImtleSIsInJ1bkFjdGlvbiIsIlVpIiwiY2hhckNvdW50ZXIiLCJmb3VuZCIsIm1ha2VQaHJhc2UiLCJsZW5ndGgiLCJjaGFyYWN0ZXJzIiwiY2hhcmFjdGVyc0xlbmd0aCIsIl9sb29wIiwiX2kiLCJyZXN1bHQiLCJuZXdDaGFyIiwiY2hhckF0IiwiZmxvb3IiLCJyYW5kb20iLCJlbGVtZW50cyIsImVsZW1lbnQiLCJzeW1ib2xzIiwic2tpcCIsImkiLCJlbGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJVaUVsZW1lbnQiLCJjb25maWciLCJsZW5ndGhQaHJhc2VzRm9yQWN0aW9ucyIsInNldFRleHQiLCJ1aUVsZW1lbnQiLCJlbGVtU3ltYm9scyIsIm9wYWNpdHkiLCJwbGF5ZXIxIiwiZWxlbSIsIl90aGlzMiIsImRhdGFzZXQiLCJpY29uIiwiYXBwZW5kQ2hpbGQiLCJlbGVtVWlJY29uIiwiZWxlbUljb24iLCJhY3RpdmVEcmF3c0xpc3QiLCJzaG93RnJhbWVSYXRlIiwiYW5pbWF0ZSIsIm9wdGlvbnMiLCJfdHlwZW9mIiwiZnJvbSIsInRvIiwibGluZWFyIiwiZHJhdyIsInByb2dyZXNzIiwiYmVmb3JlIiwiYWZ0ZXIiLCJzdGFydCIsIm5vdyIsImZyYWN0aW9uRnJvbSIsInBlcmZvcm1hbmNlIiwidGltZSIsImFuaW1hdGlvbkluZGV4IiwidGltZUZyYWN0aW9uIiwiZnJhY3Rpb25UbyIsInRpbWluZyIsInRlcm1pbmF0aW9uQ29uZGl0aW9uIiwiZnJhbWVSYXRlIiwidGltZUxhc3QiLCJyb3VuZCIsInRpbWVOb3ciLCJjdXJyZW50IiwibWFrZUVhc2VPdXQiLCJtYWtlRWFzZUluT3V0IiwicXVhZCIsInF1YWRFYXNlT3V0Iiwic2luIiwiYWNvcyIsImNpcmNFYXNlT3V0IiwiYmFjayIsIngiLCJwb3ciLCJiYWNrRWFzZU91dCIsImJvdW5jZSIsImEiLCJiIiwiYm91bmNlRWFzZU91dCIsImVsYXN0aWMiLCJjb3MiLCJQSSIsInJlYWR5IiwibGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiYWRkRXZlbnQiLCJvYmplY3QiLCJ0eXBlIiwiYXR0YWNoRXZlbnQiLCJjb21wYXJlUmFuZG9tIiwiZ2V0RG9jdW1lbnQiLCJ1cmwiLCJjYWxsYmFjayIsImh0dHAiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwiZG9jIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwicmVzcG9uc2VUZXh0Iiwic2VuZCIsImdldENvb2tpZSIsIm1hdGNoZXMiLCJyZXBsYWNlIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwidW5kZWZpbmVkIiwib2JqIiwid2luZG93IiwicnVubmluZyIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImJyZWFrcG9pbnQiLCJzbWFsbCIsImxhcmdlIiwicmVzcG9uZFRvIiwicnVuV2hlbkNhbGxlZCIsImlubmVyV2lkdGgiLCJhY3RpdmUiLCJyZXNwb25kRnJvbSJdLCJtYXBwaW5ncyI6ImFBQUEsU0FBU0EsUUFBUUMsRUFBVUMsR0FDdkIsSUFBSUMsRUFBT0YsRUFBU0csVUFEeEJILEVBQVNELFVBQVQsR0FFSUMsRUFBQUEsTUFBU0ksSUFBQUEsSUFBWSxTQUFBQyxFQUFyQkMsR0FFS0MsSUFBTEMsRUFBZUMsU0FBSUMsY0FBU0osUUFDcEJFLEVBQWdCRSxNQUFUQyxFQUFTRCxTQUFwQkwsRUFDQUEsRUFBU0EsVUFBV0EsRUFDaEJHLEVBQUNKLFVBQVlDLEVBQ2JHLEVBQUNJLE1BQUxDLFFBQWlCWixlQUNiTyxFQUFDTSxNQUFNRCxlQUFYLElBQXFCUCxFQUFyQixLQUNJTixFQUFPZSxZQUFYUDthQ1ZSLFNBQVNRLEtBQUtDLEdBQVUsSUFBQUMsRUFBQUMsS0FBZkgsRUFBZSxHQUlkSSxFQUFjSCxFQUFTSSxjQUFjLGtCQUEzQ0YsS0FBTUMsTUFBVyxD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TG5KLFdBQVQsV0FJUUUsc0JBQXNCc0gsSUFIaEIsTUFFQyxFQUdYc0IsR0FBQUosT0FBQVMsYUFBQUMsR0FBQSxLQUlYLFNBWkRDLFlBQUFQLEVBQUF0QixFQUFBMEIsRUFBQWpDLEdBYUgsR0FBQTZCLEdBQUFKLE9BQUFTLFdBQUEsQ0FDSixJQUFBQyxHQUFBLEVBS1dGLEdBSEhHLHNCQUF3QjdCLFFBT3JCNEIsR0FBUyxFQUZabkMsR0FKTHlCLE9BS08xQixpQkFBQSxrQkFBQSxXQUNDb0MsSUFBU0EsSUFDaEJBLEdBQUEsRUFNZU4sR0FBY0osT0FBT1MsWUFLckIsT0FSTG5DLFdBQWlCLFdBQ1A5RyxzQkFBQXNILElBQ1QsTUFNVyxFQUZIdEgsR0FBQUEsT0FBc0JzSCxhQUF0QjRCLEdBQUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGZ1blRleHQoZWxlbVRleHQsIGFuaW1hdGVDbGFzcykge1xuICAgIGxldCB0ZXh0ID0gZWxlbVRleHQuaW5uZXJUZXh0O1xuICAgIGVsZW1UZXh0LmlubmVySFRNTCA9ICcnO1xuXG4gICAgdGV4dC5zcGxpdCgnJykubWFwKChzeW1ib2wsIGluZGV4KSA9PiB7XG4gICAgICAgIGxldCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBzeW1ib2wgPSBzeW1ib2wgPT09ICcgJyA/ICcmbmJzcDsnIDogc3ltYm9sO1xuICAgICAgICBzcGFuLmlubmVySFRNTCA9IHN5bWJvbDtcbiAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSBhbmltYXRlQ2xhc3M7XG4gICAgICAgIHNwYW4uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICBzcGFuLnN0eWxlLmFuaW1hdGlvbkRlbGF5ID0gaW5kZXggKiAxMDAgKyAnbXMnO1xuICAgICAgICBlbGVtVGV4dC5hcHBlbmRDaGlsZChzcGFuKTtcbiAgICB9KTtcbn0iLCJmdW5jdGlvbiBIZXJvKGVsZW1IZXJvKSB7XG5cbiAgICBjb25zdCBhY3RpdmVBY3Rpb25zID0gW107XG5cbiAgICBjb25zdCBlbGVtU2tpbGxldCA9IGVsZW1IZXJvLnF1ZXJ5U2VsZWN0b3IoJy5oZXJvX19za2lsbGV0JylcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgIGFjdGlvbjogZmFsc2UsXG4gICAgICAgIG5leHRBY3Rpb246IGZhbHNlLFxuICAgICAgICBwb3NlOiBudWxsLFxuICAgICAgICBkaXJlY3Rpb246IDEsXG4gICAgICAgIGRpcmVjdGlvblk6IDEsXG4gICAgICAgIHBvc2l0aW9uWDogMCxcbiAgICAgICAgcG9zaXRpb25ZOiAwLFxuICAgICAgICBzcGVlZFg6IDAsXG4gICAgICAgIGJvb3N0WDogMCxcbiAgICAgICAgc3BlZWRZOiAwLFxuICAgICAgICBib29zdFk6IDBcbiAgICB9O1xuXG4gICAgY29uc3QgZ2V0TmV4dFBvc2l0aW9ucyA9IChwb3NpdGlvbiwgYm9vc3QsIHNwZWVkLCBkaXJlY3Rpb24sIG1heCwgbWluKSA9PiB7XG4gICAgICAgIHNwZWVkID0gTWF0aC5hYnMoc3BlZWQpIDwgMSA/IDAgOiBzcGVlZDtcbiAgICAgICAgYm9vc3QgPSBib29zdCA8PSAwID8gMCA6IGJvb3N0O1xuXG4gICAgICAgIGlmIChib29zdCA+IDApIHtcbiAgICAgICAgICAgIGJvb3N0IC09IDEgKyAoTWF0aC5hYnMoYm9vc3QpIC8gMTAwKTtcbiAgICAgICAgICAgIHNwZWVkICs9IDEgKyAoTWF0aC5hYnMoYm9vc3QpIC8gMTAwKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzcGVlZCAhPT0gMCAmJiBzcGVlZCA+IDApIHtcbiAgICAgICAgICAgIHNwZWVkIC09IDEgKyAoTWF0aC5hYnMoc3BlZWQpIC8gMTAwKTtcbiAgICAgICAgfSBlbHNlIGlmIChzcGVlZCAhPT0gMCAmJiBzcGVlZCA8IDApIHtcbiAgICAgICAgICAgIHNwZWVkICs9IDEgKyAoTWF0aC5hYnMoc3BlZWQpIC8gMTAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24gKyBzcGVlZCAvIDEwICogZGlyZWN0aW9uO1xuXG4gICAgICAgIGlmIChwb3NpdGlvbiA+IG1heCkge1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gc3BlZWQgPiAwID8gLTEgOiAxO1xuICAgICAgICB9IGVsc2UgaWYgKHBvc2l0aW9uIDwgbWluKSB7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBzcGVlZCA+IDAgPyAxIDogLTE7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcG9zaXRpb246IHBvc2l0aW9uLFxuICAgICAgICAgICAgYm9vc3QgOiBib29zdCxcbiAgICAgICAgICAgIHNwZWVkIDogc3BlZWQsXG4gICAgICAgICAgICBkaXJlY3Rpb24gOiBkaXJlY3Rpb25cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBhbmltYXRpb25zTG9vcC5wdXNoKCh0aW1lKSA9PiB7XG4gICAgICAgIGxldCBuZXh0UG9zaXRpb25zWCA9IGdldE5leHRQb3NpdGlvbnMoXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnBvc2l0aW9uWCxcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYm9vc3RYLFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zcGVlZFgsXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmRpcmVjdGlvbixcbiAgICAgICAgICAgIGFyZW5hLnhNYXgsXG4gICAgICAgICAgICBhcmVuYS54TWluKTtcblxuICAgICAgICB0aGlzLnN0YXRlLnBvc2l0aW9uWCA9IG5leHRQb3NpdGlvbnNYLnBvc2l0aW9uO1xuICAgICAgICB0aGlzLnN0YXRlLmJvb3N0WCA9IG5leHRQb3NpdGlvbnNYLmJvb3N0O1xuICAgICAgICB0aGlzLnN0YXRlLnNwZWVkWCA9IG5leHRQb3NpdGlvbnNYLnNwZWVkO1xuICAgICAgICB0aGlzLnN0YXRlLmRpcmVjdGlvbiA9IG5leHRQb3NpdGlvbnNYLmRpcmVjdGlvbjtcblxuICAgICAgICBsZXQgbmV4dFBvc2l0aW9uc1kgPSBnZXROZXh0UG9zaXRpb25zKFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5wb3NpdGlvblksXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmJvb3N0WSxcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuc3BlZWRZLFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5kaXJlY3Rpb25ZLFxuICAgICAgICAgICAgYXJlbmEueU1heCxcbiAgICAgICAgICAgIGFyZW5hLnlNaW4pO1xuXG4gICAgICAgIHRoaXMuc3RhdGUucG9zaXRpb25ZID0gbmV4dFBvc2l0aW9uc1kucG9zaXRpb247XG4gICAgICAgIHRoaXMuc3RhdGUuYm9vc3RZID0gbmV4dFBvc2l0aW9uc1kuYm9vc3Q7XG4gICAgICAgIHRoaXMuc3RhdGUuc3BlZWRZID0gbmV4dFBvc2l0aW9uc1kuc3BlZWQ7XG4gICAgICAgIHRoaXMuc3RhdGUuZGlyZWN0aW9uWSA9IG5leHRQb3NpdGlvbnNZLmRpcmVjdGlvbjtcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zcGVlZFkgPT09IDAgJiYgdGhpcy5zdGF0ZS5wb3NpdGlvblkgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmRpcmVjdGlvblkgPSAtMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmRpcmVjdGlvblkgPT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNwZWVkWSArPSAzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucG9zaXRpb25ZIDw9IDAgJiYgdGhpcy5zdGF0ZS5zcGVlZFkgPCA4MCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5ib29zdFkgPSAwO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zcGVlZFkgPSAwO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5wb3NpdGlvblkgPSAwO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5kaXJlY3Rpb25ZID0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnBvc2UgPT09ICdqdW1wJykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9zZSgnbGFuZGVkJyk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zZXRQb3NlKCdsYW5kZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnNldFBvc2UoJ2p1bXAnKTtcbiAgICAgICAgICAgICAgICB9LDMwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zcGVlZFkgPiAwKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RhdGUucG9zZSkgdGhpcy5zZXRQb3NlKCdqdW1wJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVuc2V0UG9zZSgnanVtcCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbUhlcm8uc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3RoaXMuc3RhdGUucG9zaXRpb25YfSUsICR7LXRoaXMuc3RhdGUucG9zaXRpb25ZfSUpYDtcbiAgICAgICAgZWxlbVNraWxsZXQuc3R5bGUudHJhbnNmb3JtID0gYHNjYWxlWCgke3RoaXMuc3RhdGUuZGlyZWN0aW9ufSlgO1xuXG4gICAgfSk7XG5cbiAgICB0aGlzLnNldFBvc2UgPSAocG9zZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5wb3NlKSB7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGVsZW1IZXJvLmNsYXNzTGlzdC5yZW1vdmUoJ2hlcm9fJyArIHRoaXMuc3RhdGUucG9zZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3NlKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnBvc2UgPSBwb3NlO1xuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICBlbGVtSGVyby5jbGFzc0xpc3QuYWRkKCdoZXJvXycgKyBwb3NlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIHRoaXMudW5zZXRQb3NlID0gKHBvc2UpID0+IHtcbiAgICAgICAgdGhpcy5zdGF0ZS5wb3NlID0gbnVsbDtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICBlbGVtSGVyby5jbGFzc0xpc3QucmVtb3ZlKCdoZXJvXycgKyBwb3NlKTtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiDQktC+0LfQvNC+0LbQvdC+INC90YPQttC90L4g0LHRg9C00LXRgiDQstC+0LfQstGA0LDRidCw0YLRjCDQv9GA0LXQtNGL0LTRg9GJ0YPRjiDQv9C+0LfRg1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0U2tpbiA9IChza2luKSA9PiB7XG4gICAgICAgIGVsZW1IZXJvLmNsYXNzTGlzdC5yZW1vdmUoJ2hlcm9fJyArIHRoaXMuc3RhdGUuc2tpbik7XG4gICAgICAgIHRoaXMuc3RhdGUuc2tpbiA9IHNraW47XG4gICAgICAgIGlmIChza2luKSB7XG4gICAgICAgICAgICBlbGVtSGVyby5jbGFzc0xpc3QuYWRkKCdoZXJvXycgKyBza2luKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgdGhpcy5uZXh0QWN0aW9uID0gZmFsc2U7XG5cblxuICAgIHRoaXMucnVuQWN0aW9uID0gKGFjdGlvbk5hbWUsIGRpcmVjdGlvbikgPT4ge1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAxIHx8IGRpcmVjdGlvbiA9PT0gLTEpIHtcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gIT09IHRoaXMuc3RhdGUuZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zcGVlZFggPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuYWN0aW9uKSB0aGlzLnN0YXRlLm5leHRBY3Rpb24gPSBbYWN0aW9uTmFtZSwgZGlyZWN0aW9uXTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5zdGF0ZS5uZXh0QWN0aW9uKTtcblxuICAgICAgICBjb25zdCBhY3Rpb24gPSBhY3Rpb25zW2FjdGlvbk5hbWVdID8gYWN0aW9uc1thY3Rpb25OYW1lXSA6IGZhbHNlO1xuICAgICAgICBpZiAoIWFjdGlvbikgcmV0dXJuIHRoaXM7XG4gICAgICAgIGlmIChhY3RpdmVBY3Rpb25zLmluZGV4T2YoIGFjdGlvbk5hbWUgKSAhPT0gLTEgKSByZXR1cm4gdGhpcztcbiAgICAgICAgYWN0aXZlQWN0aW9ucy5wdXNoKGFjdGlvbk5hbWUpO1xuXG4gICAgICAgIGxldCBkZWxheSA9IDA7XG4gICAgICAgIGFjdGlvbi5tYXAoKGFjdGlvblN0ZXAsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGFjdGlvblN0ZXAuYWN0aW9uLCBkZWxheSk7XG4gICAgICAgICAgICBkZWxheSArPSBhY3Rpb25TdGVwLmR1cmF0aW9uID8gYWN0aW9uU3RlcC5kdXJhdGlvbiA6IDA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgYWN0aXZlQWN0aW9ucy5zcGxpY2UoYWN0aXZlQWN0aW9ucy5pbmRleE9mKGFjdGlvbk5hbWUsIDEpKTtcbiAgICAgICAgfSwgZGVsYXkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgY29uc3QgYWN0aW9ucyA9IHtcbiAgICAgICAgJ2p1bXAnOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2p1bXAtc3RhcnQnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zdGF0ZS5wb3NpdGlvblkgPiAwKSB0aGlzLnN0YXRlLnNwZWVkWSA9IDYwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmJvb3N0WCA9IDMwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgJ2Rvd24nIDogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdkb3duLXN0YXJ0JyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFBvc2UoJ2Rvd24nKTs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnZG93bi1lbmQnLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc2V0UG9zZSgnZG93bicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgJ21vdmUnIDogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdTdGVwMScsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5ib29zdFggPSAzNTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXRlLnBvc2UpIHRoaXMuc2V0UG9zZSgnc3RlcC0xJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnU3RlcDInLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zZXRQb3NlKCdzdGVwLTEnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXRlLnBvc2UpIHRoaXMuc2V0UG9zZSgnc3RlcC0yJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnc3RvcCcsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zZXRQb3NlKCdzdGVwLTInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgICdkYW1hZ2UnIDogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICd0YWtlRGFtYWdlU3RhcnQnLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9zZSgnZGFtYWdlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAndGFrZURhbWFnZUVuZCcsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zZXRQb3NlKCdkYW1hZ2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgICdoaXQnIDogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdoaXQxJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFBvc2UoJ2hpdC0xJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnaGl0MicsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnNldFBvc2UoJ2hpdC0xJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9zZSgnaGl0LTInKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNoYW5nZWREaXJlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGdhbWVPYmplY3RzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVPYmplY3RzW2tleV0gIT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpc3RhbmNlID0gIGdhbWVPYmplY3RzW2tleV0uc3RhdGUucG9zaXRpb25YIC0gdGhpcy5zdGF0ZS5wb3NpdGlvblg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkaXN0YW5jZVkgPSBnYW1lT2JqZWN0c1trZXldLnN0YXRlLnBvc2l0aW9uWSAtIHRoaXMuc3RhdGUucG9zaXRpb25ZO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhkaXN0YW5jZSkgPD0gMjAwICYmIE1hdGguYWJzKGRpc3RhbmNlWSkgPCAxMDApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGFuZ2VkRGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmRpcmVjdGlvbiA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVPYmplY3RzW2tleV0uc3RhdGUuZGlyZWN0aW9uID0gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5kaXJlY3Rpb24gPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZU9iamVjdHNba2V5XS5zdGF0ZS5kaXJlY3Rpb24gPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkRGlyZWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuZGlyZWN0aW9uICsgZ2FtZU9iamVjdHNba2V5XS5zdGF0ZS5kaXJlY3Rpb24gPT09IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBkaXN0YW5jZSAqIHRoaXMuc3RhdGUuZGlyZWN0aW9uID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVPYmplY3RzW2tleV0uc3RhdGUuc3BlZWRYID0gLTUwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVPYmplY3RzW2tleV0ucnVuQWN0aW9uKCdkYW1hZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnaGl0RW5kJyxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnNldFBvc2UoJ2hpdC0yJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBdXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzO1xufVxuIiwiZnVuY3Rpb24gVWkgKCkge1xuICAgIGxldCBjaGFyQ291bnRlciA9IDA7XG4gICAgbGV0IGZvdW5kID0gLTE7XG5cbiAgICB0aGlzLm1ha2VQaHJhc2UgPSAobGVuZ3RoKSA9PiB7XG4gICAgICAgIGxldCByZXN1bHQgICAgICAgICAgID0gJyc7XG4gICAgICAgIGxldCBjaGFyYWN0ZXJzICAgICAgID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JztcbiAgICAgICAgbGV0IGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aDtcbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG4gICAgICAgICAgICBsZXQgbmV3Q2hhciA9IGNoYXJhY3RlcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJhY3RlcnNMZW5ndGgpKTtcbiAgICAgICAgICAgIGxldCBza2lwID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMubWFwKChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zeW1ib2xzWzBdID09PSBuZXdDaGFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICBza2lwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFza2lwKSByZXN1bHQgKz0gbmV3Q2hhcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICB0aGlzLmVsZW1lbnRzID0gW107XG4gICAgbGV0IGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnVpX19lbGVtZW50Jyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmVsZW1lbnRzW2ldID0gbmV3IFVpRWxlbWVudChlbGVtc1tpXSk7XG4gICAgICAgIGxldCBsZW5ndGggPSA0O1xuICAgICAgICBpZiAoY29uZmlnLmxlbmd0aFBocmFzZXNGb3JBY3Rpb25zW3RoaXMuZWxlbWVudHNbaV0uYWN0aW9uXSkge1xuICAgICAgICAgICAgbGVuZ3RoID0gY29uZmlnLmxlbmd0aFBocmFzZXNGb3JBY3Rpb25zW3RoaXMuZWxlbWVudHNbaV0uYWN0aW9uXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVsZW1lbnRzW2ldLnNldFRleHQodGhpcy5tYWtlUGhyYXNlKGxlbmd0aCkpO1xuICAgIH1cblxuICAgIHRoaXMuZm91bmQgPSAoa2V5KSA9PiB7XG4gICAgICAgIGlmIChmb3VuZCA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMubWFwKCh1aUVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHVpRWxlbWVudC5zeW1ib2xzW2NoYXJDb3VudGVyXSA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHVpRWxlbWVudC5lbGVtU3ltYm9sc1tjaGFyQ291bnRlcl0uY2xhc3NMaXN0LnJlbW92ZSgnZmFkZUluJyk7XG4gICAgICAgICAgICAgICAgICAgIHVpRWxlbWVudC5lbGVtU3ltYm9sc1tjaGFyQ291bnRlcl0uY2xhc3NMaXN0LmFkZCgnZmFkZU91dERvd24nKTtcbiAgICAgICAgICAgICAgICAgICAgdWlFbGVtZW50LmVsZW1UZXh0LnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgxLjUpJztcbiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBpbmRleDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1aUVsZW1lbnQuZWxlbS5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2hhckNvdW50ZXIrKztcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnRzW2ZvdW5kXS5zeW1ib2xzW2NoYXJDb3VudGVyXSA9PT0ga2V5KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzW2ZvdW5kXS5lbGVtU3ltYm9sc1tjaGFyQ291bnRlcl0uY2xhc3NMaXN0LnJlbW92ZSgnZmFkZUluJyk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzW2ZvdW5kXS5lbGVtU3ltYm9sc1tjaGFyQ291bnRlcl0uY2xhc3NMaXN0LmFkZCgnZmFkZU91dERvd24nKTtcbiAgICAgICAgICAgIGNoYXJDb3VudGVyKys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzW2ZvdW5kXS5zZXRUZXh0KHRoaXMubWFrZVBocmFzZSh0aGlzLmVsZW1lbnRzW2ZvdW5kXS50ZXh0Lmxlbmd0aCkpO1xuICAgICAgICAgICAgZm91bmQgPSAtMTtcbiAgICAgICAgICAgIGNoYXJDb3VudGVyID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmb3VuZCA+PSAwICYmIHRoaXMuZWxlbWVudHNbZm91bmRdLnN5bWJvbHMubGVuZ3RoID09PSBjaGFyQ291bnRlcikge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50c1tmb3VuZF0uc2V0VGV4dCh0aGlzLm1ha2VQaHJhc2UodGhpcy5lbGVtZW50c1tmb3VuZF0udGV4dC5sZW5ndGgpKTtcbiAgICAgICAgICAgIGdhbWVPYmplY3RzLnBsYXllcjEucnVuQWN0aW9uKHRoaXMuZWxlbWVudHNbZm91bmRdLmFjdGlvbiAsICt0aGlzLmVsZW1lbnRzW2ZvdW5kXS5kaXJlY3Rpb24pO1xuICAgICAgICAgICAgZm91bmQgPSAtMTtcbiAgICAgICAgICAgIGNoYXJDb3VudGVyID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChmb3VuZCA+PSAwICkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50c1tmb3VuZF0uZWxlbVN5bWJvbHNbY2hhckNvdW50ZXJdLmNsYXNzTGlzdC5hZGQoJ3N5bWJvbF9zZWxlY3RlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvdW5kIDwgMCl7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzLm1hcCgodWlFbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIHVpRWxlbWVudC5lbGVtLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgICAgICAgICAgICAgdWlFbGVtZW50LmVsZW1UZXh0LnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmb3VuZCA9IC0xO1xuICAgICAgICAgICAgY2hhckNvdW50ZXIgPSAwO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzO1xuXG59XG5cblxuZnVuY3Rpb24gVWlFbGVtZW50IChlbGVtKSB7XG4gICAgdGhpcy5lbGVtID0gZWxlbTtcbiAgICB0aGlzLnRleHQgPSAnJztcbiAgICB0aGlzLmFjdGlvbiA9IGVsZW0uZGF0YXNldC5hY3Rpb247XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBlbGVtLmRhdGFzZXQuZGlyZWN0aW9uO1xuICAgIHRoaXMuaWNvbiA9IGVsZW0uZGF0YXNldC5pY29uO1xuICAgIHRoaXMuc3ltYm9scyA9IFtdO1xuICAgIHRoaXMuZWxlbVN5bWJvbHMgPSBbXTtcblxuICAgIHRoaXMuZWxlbVRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmVsZW1UZXh0LmNsYXNzTGlzdC5hZGQoJ3VpX190ZXh0Jyk7XG4gICAgdGhpcy5lbGVtLmFwcGVuZENoaWxkKHRoaXMuZWxlbVRleHQpO1xuXG4gICAgdGhpcy5lbGVtVWlJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5lbGVtVWlJY29uLmNsYXNzTGlzdC5hZGQoJ3VpX19pY29uJyk7XG4gICAgdGhpcy5lbGVtLmFwcGVuZENoaWxkKHRoaXMuZWxlbVVpSWNvbik7XG5cbiAgICB0aGlzLmVsZW1JY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5lbGVtSWNvbi5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgdGhpcy5lbGVtSWNvbi5jbGFzc0xpc3QuYWRkKCdpY29uXycgKyB0aGlzLmljb24pO1xuICAgIHRoaXMuZWxlbVVpSWNvbi5hcHBlbmRDaGlsZCh0aGlzLmVsZW1JY29uKTtcblxuXG4gICAgdGhpcy5zZXRUZXh0ID0gKHRleHQpID0+IHtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgdGhpcy5lbGVtVGV4dC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgdGhpcy50ZXh0LnNwbGl0KCcnKS5tYXAoKHN5bWJvbCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGxldCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgc3ltYm9sID0gc3ltYm9sID09PSAnICcgPyAnJm5ic3A7JyA6IHN5bWJvbDtcbiAgICAgICAgICAgIHRoaXMuc3ltYm9sc1tpbmRleF0gPSBzeW1ib2w7XG4gICAgICAgICAgICBzcGFuLmlubmVySFRNTCA9IHN5bWJvbDtcbiAgICAgICAgICAgIHNwYW4uY2xhc3NOYW1lID0gJ3N5bWJvbCBmYWRlSW4nO1xuICAgICAgICAgICAgc3Bhbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgICAgICAgICBzcGFuLnN0eWxlLmFuaW1hdGlvbkRlbGF5ID0gaW5kZXggKiAxMDAgKyAnbXMnO1xuICAgICAgICAgICAgdGhpcy5lbGVtU3ltYm9sc1tpbmRleF0gPSBzcGFuO1xuICAgICAgICAgICAgdGhpcy5lbGVtVGV4dC5hcHBlbmRDaGlsZChzcGFuKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gIHJldHVybiB0aGlzO1xufVxuIiwidmFyIGFjdGl2ZURyYXdzTGlzdCA9IFtdO1xudmFyIHNob3dGcmFtZVJhdGUgPSBmYWxzZTtcblxuZnVuY3Rpb24gYW5pbWF0ZShvcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgID0gKHR5cGVvZihvcHRpb25zKSAgICAgICAgICA9PSAnb2JqZWN0JykgICA/IG9wdGlvbnMgICAgICAgICAgOiB7fTtcbiAgICB2YXIgZHVyYXRpb24gPSAodHlwZW9mKG9wdGlvbnMuZHVyYXRpb24pID09ICdudW1iZXInKSAgID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDA7XG4gICAgdmFyIGRlbGF5ICAgID0gKHR5cGVvZihvcHRpb25zLmRlbGF5KSAgICA9PSAnbnVtYmVyJykgICA/IG9wdGlvbnMuZGVsYXkgICAgOiAwO1xuICAgIHZhciBmcm9tICAgICA9ICh0eXBlb2Yob3B0aW9ucy5mcm9tKSAgICAgPT0gJ251bWJlcicpICAgPyBvcHRpb25zLmZyb20gICAgIDogMTtcbiAgICB2YXIgdG8gICAgICAgPSAodHlwZW9mKG9wdGlvbnMudG8pICAgICAgID09ICdudW1iZXInKSAgID8gb3B0aW9ucy50byAgICAgICA6IDEwMDtcbiAgICB2YXIgdGltaW5nICAgPSAodHlwZW9mKG9wdGlvbnMudGltaW5nKSAgID09ICdmdW5jdGlvbicpID8gb3B0aW9ucy50aW1pbmcgICA6IGxpbmVhcjtcbiAgICB2YXIgZHJhdyAgICAgPSAodHlwZW9mKG9wdGlvbnMuZHJhdykgICAgID09ICdmdW5jdGlvbicpID8gb3B0aW9ucy5kcmF3ICAgICA6IGZ1bmN0aW9uKHByb2dyZXNzKXtjb25zb2xlLmxvZyhwcm9ncmVzcyAqIDEwMCl9O1xuICAgIHZhciBiZWZvcmUgICA9ICh0eXBlb2Yob3B0aW9ucy5iZWZvcmUpICAgPT0gJ2Z1bmN0aW9uJykgPyBvcHRpb25zLmJlZm9yZSAgIDogZnVuY3Rpb24oKSB7fTtcbiAgICB2YXIgYWZ0ZXIgICAgPSAodHlwZW9mKG9wdGlvbnMuYWZ0ZXIpICAgID09ICdmdW5jdGlvbicpID8gb3B0aW9ucy5hZnRlciAgICA6IGZ1bmN0aW9uKCkge307XG5cbiAgICB2YXIgZnJhY3Rpb25Gcm9tID0gZnJvbSAvIDEwMDtcbiAgICB2YXIgZnJhY3Rpb25UbyAgID0gdG8gLyAxMDA7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc3RhcnQgICAgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgdmFyIHRpbWVMYXN0ID0gc3RhcnQ7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IGFjdGl2ZURyYXdzTGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYgKGFjdGl2ZURyYXdzTGlzdFtpXSA9PT0gZHJhdykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgYW5pbWF0aW9uSW5kZXggPSBhY3RpdmVEcmF3c0xpc3QucHVzaChkcmF3KTtcblxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gYW5pbWF0ZSh0aW1lKSB7XG4gICAgICAgICAgICBpZiAoYmVmb3JlKSB7XG4gICAgICAgICAgICAgICAgYmVmb3JlKCk7XG4gICAgICAgICAgICAgICAgYmVmb3JlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGltZUZyYWN0aW9uID0gKHRpbWUgLSBzdGFydCkgLyBkdXJhdGlvbjtcbiAgICAgICAgICAgIGlmICh0aW1lRnJhY3Rpb24gPiAxKSB0aW1lRnJhY3Rpb24gPSAxO1xuXG4gICAgICAgICAgICBpZiAoZnJhY3Rpb25Gcm9tIDwgZnJhY3Rpb25Ubykge1xuICAgICAgICAgICAgICAgIHRpbWVGcmFjdGlvbiA9IHRpbWVGcmFjdGlvbiArIGZyYWN0aW9uRnJvbTtcbiAgICAgICAgICAgICAgICB2YXIgdGVybWluYXRpb25Db25kaXRpb24gPSB0aW1lRnJhY3Rpb24gPCBmcmFjdGlvblRvO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aW1lRnJhY3Rpb24gPSAtKHRpbWVGcmFjdGlvbiAtIGZyYWN0aW9uRnJvbSk7XG4gICAgICAgICAgICAgICAgdmFyIHRlcm1pbmF0aW9uQ29uZGl0aW9uID0gdGltZUZyYWN0aW9uID4gZnJhY3Rpb25UbztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gdGltaW5nKHRpbWVGcmFjdGlvbik7XG5cbiAgICAgICAgICAgIGRyYXcocHJvZ3Jlc3MpO1xuXG4gICAgICAgICAgICBpZiAodGVybWluYXRpb25Db25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2hvd0ZyYW1lUmF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmcmFtZVJhdGUodGltZUxhc3QsIHRpbWUpLCBNYXRoLnJvdW5kKHRpbWVGcmFjdGlvbiAqIDEwMCkpO1xuICAgICAgICAgICAgICAgICAgICB0aW1lTGFzdCA9IHRpbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhY3RpdmVEcmF3c0xpc3Quc3BsaWNlKGFjdGl2ZURyYXdzTGlzdC5pbmRleE9mKGRyYXcpLCAxKTtcbiAgICAgICAgICAgICAgICBpZiAoYWZ0ZXIpIGFmdGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sIGRlbGF5KTtcbn1cblxuZnVuY3Rpb24gZnJhbWVSYXRlKHRpbWVMYXN0LCB0aW1lTm93KSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoMTAwMCAvICh0aW1lTm93IC0gdGltZUxhc3QpKTtcbn1cblxuZnVuY3Rpb24gem9uZShjdXJyZW50LCBmcm9tLCB0bywgZHJhdykge1xuICAgIGN1cnJlbnQgPSBjdXJyZW50ICogMTAwO1xuICAgIGZyb20gICAgPSBmcm9tICogMTAwO1xuICAgIHRvICAgICAgPSB0byAqIDEwMDtcbiAgICBkcmF3ICAgID0gZHJhdyAqIDEwMDtcblxuICAgIGlmIChjdXJyZW50ID49IGZyb20gJiYgY3VycmVudCA8PSB0bykge1xuICAgICAgICB2YXIgcHJvZ3Jlc3MgPSAoY3VycmVudCAtIGZyb20pIC8gKHRvIC0gZnJvbSk7XG4gICAgICAgIGlmIChkcmF3KSBkcmF3KHByb2dyZXNzKTtcbiAgICAgICAgcmV0dXJuIHByb2dyZXNzO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudCA8PSBmcm9tKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudCA+PSB0bykge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG59XG5cblxuLy8g0L/RgNC10L7QsdGA0LDQt9C+0LLQsNGC0LXQu9GMINCyIGVhc2VPdXRcbmZ1bmN0aW9uIG1ha2VFYXNlT3V0KHRpbWluZykge1xuICAgIHJldHVybiBmdW5jdGlvbih0aW1lRnJhY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIDEgLSB0aW1pbmcoMSAtIHRpbWVGcmFjdGlvbik7XG4gICAgfVxufVxuLy8g0L/RgNC10L7QsdGA0LDQt9C+0LLQsNGC0LXQu9GMINCyIGVhc2VPdXRcbmZ1bmN0aW9uIG1ha2VFYXNlSW5PdXQodGltaW5nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHRpbWVGcmFjdGlvbikge1xuICAgICAgICBpZiAodGltZUZyYWN0aW9uIDwgMC41KVxuICAgICAgICAgICAgcmV0dXJuIHRpbWluZygyICogdGltZUZyYWN0aW9uKSAvIDI7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiAoMiAtIHRpbWluZygyICogKDEgLSB0aW1lRnJhY3Rpb24pKSkgLyAyO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbGluZWFyKHByb2dyZXNzKSB7XG4gICAgcmV0dXJuIHByb2dyZXNzO1xufVxuXG5mdW5jdGlvbiBxdWFkKHByb2dyZXNzKSB7XG4gICAgcmV0dXJuIE1hdGgucG93KHByb2dyZXNzLCAyKTtcbn1cbnZhciBxdWFkRWFzZU91dCA9IG1ha2VFYXNlT3V0KHF1YWQpO1xuXG5mdW5jdGlvbiBjaXJjKHRpbWVGcmFjdGlvbikge1xuICAgIHJldHVybiAxIC0gTWF0aC5zaW4oTWF0aC5hY29zKHRpbWVGcmFjdGlvbikpXG59XG52YXIgY2lyY0Vhc2VPdXQgPSBtYWtlRWFzZU91dChjaXJjKTtcblxuZnVuY3Rpb24gYmFjayh4LCB0aW1lRnJhY3Rpb24pIHtcbiAgICByZXR1cm4gTWF0aC5wb3codGltZUZyYWN0aW9uLCAyKSAqICgoeCArIDEpICogdGltZUZyYWN0aW9uIC0geClcbn1cbnZhciBiYWNrRWFzZU91dCA9IG1ha2VFYXNlT3V0KGJhY2spO1xuXG5mdW5jdGlvbiBib3VuY2UocHJvZ3Jlc3MpIHtcbiAgICBmb3IgKHZhciBhID0gMCwgYiA9IDEsIHJlc3VsdDsgMTsgYSArPSBiLCBiIC89IDIpIHtcbiAgICAgICAgaWYgKHByb2dyZXNzID49ICg3IC0gNCAqIGEpIC8gMTEpIHtcbiAgICAgICAgICAgIHJldHVybiAtTWF0aC5wb3coKDExIC0gNiAqIGEgLSAxMSAqIHByb2dyZXNzKSAvIDQsIDIpICsgTWF0aC5wb3coYiwgMik7XG4gICAgICAgIH1cbiAgICB9XG59XG52YXIgYm91bmNlRWFzZU91dCA9IG1ha2VFYXNlT3V0KGJvdW5jZSk7XG5cbmZ1bmN0aW9uIGVsYXN0aWMoeCwgdGltZUZyYWN0aW9uKSB7XG4gICAgcmV0dXJuIE1hdGgucG93KDIsIDEwICogKHRpbWVGcmFjdGlvbiAtIDEpKSAqIE1hdGguY29zKDIwICogTWF0aC5QSSAqIHggLyAzICogdGltZUZyYWN0aW9uKVxufVxudmFyIGVsYXN0aWNFYXNlT3V0ID0gbWFrZUVhc2VPdXQoZWxhc3RpYyk7XG4iLCIvKipcbiAqINCh0L7QutGA0LDRidC10L3QuNC1INC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDRgdC+0LHRi9GC0LjRjyBET01Db250ZW50TG9hZGVkXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBD0LvRg9GI0LDRgtC10LvRjCDRgdC+0LHRi9GC0LjRj1xuICovXG5mdW5jdGlvbiByZWFkeShsaXN0ZW5lcikge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGxpc3RlbmVyKTtcbn1cblxuLyoqXG4gKiBDdXN0b20gRXZlbnQgUmVzaXplXG4gKi9cbihmdW5jdGlvbigpIHtcbiAgICB2YXIgdGhyb3R0bGUgPSBmdW5jdGlvbih0eXBlLCBuYW1lLCBvYmopIHtcbiAgICAgICAgb2JqID0gb2JqIHx8IHdpbmRvdztcbiAgICAgICAgdmFyIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgdmFyIGZ1bmMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7IHJldHVybjsgfVxuICAgICAgICAgICAgcnVubmluZyA9IHRydWU7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgb2JqLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KG5hbWUpKTtcbiAgICAgICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuYyk7XG4gICAgfTtcblxuICAgIC8qIGluaXQgLSB5b3UgY2FuIGluaXQgYW55IGV2ZW50ICovXG4gICAgdGhyb3R0bGUoXCJyZXNpemVcIiwgXCJvcHRpbWl6ZWRSZXNpemVcIik7XG59KSgpO1xuXG5cbi8qKlxuICog0JTQvtCx0LDQstC70LXQvdC40LUg0YHQvtCx0YvRgtC40LlcbiAqIEBwYXJhbSB7W3R5cGVdfSAgIG9iamVjdCAgIERPTSDRg9C30LXQu1xuICogQHBhcmFtIHtzdHJpbmd9ICAgdHlwZSAgICAg0KLQuNC/INC/0YDQvtGB0LvRg9GI0LjQstCw0LXQvNC+0LPQviDRgdC+0LHRi9GC0LjRjy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIEPQu9GD0YjQsNGC0LXQu9GMINGB0L7QsdGL0YLQuNGPXG4gKi9cbmZ1bmN0aW9uIGFkZEV2ZW50KG9iamVjdCwgdHlwZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAob2JqZWN0ID09IG51bGwgfHwgdHlwZW9mKG9iamVjdCkgPT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcbiAgICBpZiAob2JqZWN0LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgb2JqZWN0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKG9iamVjdC5hdHRhY2hFdmVudCkge1xuICAgICAgICBvYmplY3QuYXR0YWNoRXZlbnQoXCJvblwiICsgdHlwZSwgbGlzdGVuZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdFtcIm9uXCIgKyB0eXBlXSA9IGxpc3RlbmVyO1xuICAgIH1cbn07XG5cbi8qKlxuICog0YFvbXBhcmVGdW5jdGlvbiDQtNC70Y8gYXJyLnNvcnQsINC00LvRjyDRgdC+0YDRgtC40YDQvtC60Lgg0YHQu9GD0YfQudC90L7QvCDQv9C+0YDRj9C00LrQtVxuICovXG5mdW5jdGlvbiBjb21wYXJlUmFuZG9tKGEsIGIpIHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAtIDAuNTtcbn1cblxuLyoqXG4gKiDQn9C+0LvRg9GH0LXQvdC40LUgRE9NINC00LXRgNC10LLQsCDQtNGA0YPQs9C+0Lkg0YHRgtGA0LDQvdC40YbRi1xuICogQHBhcmFtICB7U3RyaW5nfSAgIHVybCAgICAgIFVSTCDRgdGC0YDQsNC90LjRhtGLXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gY2FsbGJhY2sg0J/QtdGA0LXQtNCw0LLQsNC10LzQsNGPINGE0YPQvdC60YbQuNGPXG4gKi9cbmZ1bmN0aW9uIGdldERvY3VtZW50KHVybCwgY2FsbGJhY2spXG57XG4gIHZhciBodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gIGh0dHAub3BlbignR0VUJywgdXJsKTtcbiAgaHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKVxuICB7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0ICYmIHRoaXMuc3RhdHVzID09IDIwMCkge1xuICAgICAgdmFyIGRvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcodGhpcy5yZXNwb25zZVRleHQsIFwidGV4dC9odG1sXCIpOyAgLy8g0L/RgNC10L7QsdGA0LDQt9C+0LLQsNGC0Ywg0YLQtdC60YHRgiDQsiBIVE1MXG5cbiAgICAgIGNhbGxiYWNrKGRvYyk7XG4gICAgfVxuICB9XG4gIGh0dHAuc2VuZChudWxsKTtcbn1cblxuLyoqXG4gKiAg0LLQvtC30LLRgNCw0YnQsNC10YIgY29va2llINGBINC40LzQtdC90LXQvCBuYW1lLCDQtdGB0LvQuCDQtdGB0YLRjCwg0LXRgdC70Lgg0L3QtdGCLCDRgtC+IHVuZGVmaW5lZFxuICovXG5mdW5jdGlvbiBnZXRDb29raWUobmFtZSkge1xuICB2YXIgbWF0Y2hlcyA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKFxuICAgIFwiKD86Xnw7IClcIiArIG5hbWUucmVwbGFjZSgvKFtcXC4kPyp8e31cXChcXClcXFtcXF1cXFxcXFwvXFwrXl0pL2csICdcXFxcJDEnKSArIFwiPShbXjtdKilcIlxuICApKTtcbiAgcmV0dXJuIG1hdGNoZXMgPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hlc1sxXSkgOiB1bmRlZmluZWQ7XG59XG4iLCJ2YXIgYnJlYWtwb2ludCA9IHtcbiAgICAnc21hbGwnOiA3NjcsXG4gICAgJ21lZGl1bSc6IDk5MixcbiAgICAnbGFyZ2UnOiAxMjAwXG59O1xuXG5mdW5jdGlvbiByZXNwb25kVG8oYnJlYWtwb2ludCwgY2FsbGJhY2ssIHJ1bldoZW5DYWxsZWQsIGFkZEV2ZW50KSB7XG4gICAgaWYgKGJyZWFrcG9pbnQgPj0gd2luZG93LmlubmVyV2lkdGgpIHtcbiAgICAgICAgdmFyIGFjdGl2ZSA9IHRydWU7XG4gICAgICAgIGlmIChydW5XaGVuQ2FsbGVkKSB7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChhZGRFdmVudCkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9wdGltaXplZFJlc2l6ZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoYnJlYWtwb2ludCA+PSB3aW5kb3cuaW5uZXJXaWR0aCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChicmVha3BvaW50IDw9IHdpbmRvdy5pbm5lcldpZHRoKSBhY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZXNwb25kRnJvbShicmVha3BvaW50LCBjYWxsYmFjaywgcnVuV2hlbkNhbGxlZCwgYWRkRXZlbnQpIHtcbiAgICBpZiAoYnJlYWtwb2ludCA8PSB3aW5kb3cuaW5uZXJXaWR0aCkge1xuICAgICAgICB2YXIgYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgaWYgKHJ1bldoZW5DYWxsZWQpIHtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYWN0aXZlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGFkZEV2ZW50KSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3B0aW1pemVkUmVzaXplXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCFhY3RpdmUpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChicmVha3BvaW50IDw9IHdpbmRvdy5pbm5lcldpZHRoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJyZWFrcG9pbnQgPj0gd2luZG93LmlubmVyV2lkdGgpIGFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iXX0=
